[student@workstation ~]$ oc login -u vkndeo -p e5e8e891ea464403b15e https://api.ap46a.prod.ole.redhat.com:6443
Login successful.

You have access to the following projects and can switch between them with ' project <projectname>':

  * vkndeo-helm
    vkndeo-project-s2i
    vkndeo-project1-oci

Using project "vkndeo-helm".
[student@workstation ~]$ oc new-project vkndeo-project-kustomize
Now using project "vkndeo-project-kustomize" on server "https://api.ap46a.prod.ole.redhat.com:6443".

You can add applications to this project with the 'new-app' command. For example, try:

    oc new-app rails-postgresql-example

to build a new example application in Ruby. Or use kubectl to deploy a simple Kubernetes application:

    kubectl create deployment hello-node --image=k8s.gcr.io/serve_hostname

[student@workstation ~]$ oc get all
No resources found in vkndeo-project-kustomize namespace.
[student@workstation ~]$ ls
Desktop     DO288-apps  get_helm.sh     mychart                      Pictures        s2i-sample-app              Videos
DO180-apps  Documents   history_12.txt  php-73-ubi8-newer.tar.gz     Public          s2i_steps_for_verification
DO288       Downloads   Music           php-73-ubi8-original.tar.gz  s2i-demo-httpd  Templates
[student@workstation ~]$ 
[student@workstation ~]$ 
[student@workstation ~]$ 
[student@workstation ~]$ 
[student@workstation ~]$ kubectl create deployment myweb --image=quay.io/redhattraining/versioned-hello:v1.0 --dry-run=client -o yaml > deployment.yaml
[student@workstation ~]$ ls -l deployment.yaml 
-rw-rw-r--. 1 student student 432 Apr 12 23:46 deployment.yaml
[student@workstation ~]$ vim deployment.yaml 
[student@workstation ~]$ 
[student@workstation ~]$ kubectl create -f deployment.yaml
deployment.apps/myweb created
[student@workstation ~]$ kubectl get pods 
NAME                    READY   STATUS    RESTARTS   AGE
myweb-884856fbf-gnbd6   1/1     Running   0          11s
[student@workstation ~]$ kubectl get all
NAME                        READY   STATUS    RESTARTS   AGE
pod/myweb-884856fbf-gnbd6   1/1     Running   0          44s

NAME                    READY   UP-TO-DATE   AVAILABLE   AGE
deployment.apps/myweb   1/1     1            1           45s

NAME                              DESIRED   CURRENT   READY   AGE
replicaset.apps/myweb-884856fbf   1         1         1       45s
[student@workstation ~]$ 
[student@workstation ~]$ kubectl exec -it myweb-884856fbf-gnbd6 -- curl localhost:8080
Hi!
[student@workstation ~]$ kubectl delete -f deployment.yaml 
deployment.apps "myweb" deleted
[student@workstation ~]$ kubectl get all
No resources found in vkndeo-project-kustomize namespace.
[student@workstation ~]$ ls
deployment.yaml  DO288       Downloads       Music                     php-73-ubi8-original.tar.gz  s2i-demo-httpd              Templates
Desktop          DO288-apps  get_helm.sh     mychart                   Pictures                     s2i-sample-app              Videos
DO180-apps       Documents   history_12.txt  php-73-ubi8-newer.tar.gz  Public                       s2i_steps_for_verification
[student@workstation ~]$ mkdir -p /home/student/base 
[student@workstation ~]$ mkdir -p /home/student/overlays/{dev,prod}
[student@workstation ~]$ tree base/
base/

0 directories, 0 files
[student@workstation ~]$ tree overlays/
overlays/
├── dev
└── prod

2 directories, 0 files
[student@workstation ~]$ 
[student@workstation ~]$ 
[student@workstation ~]$ mkdir demo 
[student@workstation ~]$ cp deployment.yaml demo/
[student@workstation ~]$ cd demo/
[student@workstation demo]$ ls
deployment.yaml
[student@workstation demo]$ vim kustomization.yaml
[student@workstation demo]$ cat kustomization.yaml
resources:
  - deployment.yaml
[student@workstation demo]$ 
[student@workstation demo]$ kubectl get all
No resources found in vkndeo-project-kustomize namespace.
[student@workstation demo]$ ls
deployment.yaml  kustomization.yaml
[student@workstation demo]$ kubectl apply -k .
deployment.apps/myweb created
[student@workstation demo]$ kubectl get all
NAME                        READY   STATUS    RESTARTS   AGE
pod/myweb-884856fbf-9g8tr   1/1     Running   0          17s

NAME                    READY   UP-TO-DATE   AVAILABLE   AGE
deployment.apps/myweb   1/1     1            1           17s

NAME                              DESIRED   CURRENT   READY   AGE
replicaset.apps/myweb-884856fbf   1         1         1       17s
[student@workstation demo]$ kubectl exec -it myweb-884856fbf-9g8tr -- curl localhost:8080 
Hi!
[student@workstation demo]$ 
[student@workstation demo]$ 
[student@workstation demo]$ kubectl delete -k . 
deployment.apps "myweb" deleted
[student@workstation demo]$ kubectl get all
No resources found in vkndeo-project-kustomize namespace.
[student@workstation demo]$ cd
[student@workstation ~]$ tree base/
base/

0 directories, 0 files
[student@workstation ~]$ tree overlays/
overlays/
├── dev
└── prod

2 directories, 0 files
[student@workstation ~]$ cp deployment.yaml base/
[student@workstation ~]$ cp demo/kustomization.yaml base/
[student@workstation ~]$ cd base/
[student@workstation base]$ ls 
deployment.yaml  kustomization.yaml
[student@workstation base]$ vim kustomization.yaml 
[student@workstation base]$ cat kustomization.yaml
resources:
  - deployment.yaml
commonLabels:
  org: IBM 
[student@workstation base]$ 
[student@workstation base]$ 
[student@workstation base]$ vim ../overlays/dev/kustomization.yaml
[student@workstation base]$ cat ../overlays/dev/kustomization.yaml
bases:
  - ../../base
namePrefix: dev-
[student@workstation base]$ 
[student@workstation base]$ 
[student@workstation base]$ cp ../overlays/dev/kustomization.yaml ../overlays/prod/
[student@workstation base]$ vim ../overlays/prod/kustomization.yaml 
[student@workstation base]$ cat ../overlays/prod/kustomization.yaml
bases:
  - ../../base
namePrefix: prod-
[student@workstation base]$ kubectl apply -k .
deployment.apps/myweb created
[student@workstation base]$ kubectl get all --show-labels
NAME                         READY   STATUS    RESTARTS   AGE   LABELS
pod/myweb-655b696755-xjgn6   1/1     Running   0          15s   app=myweb,org=IBM,pod-template-hash=655b696755

NAME                    READY   UP-TO-DATE   AVAILABLE   AGE   LABELS
deployment.apps/myweb   1/1     1            1           16s   app=myweb,org=IBM

NAME                               DESIRED   CURRENT   READY   AGE   LABELS
replicaset.apps/myweb-655b696755   1         1         1       16s   app=myweb,org=IBM,pod-template-hash=655b696755
[student@workstation base]$ 
[student@workstation base]$ 
[student@workstation base]$ kubectl apply -k ../overlays/dev/
deployment.apps/dev-myweb created
[student@workstation base]$ kubectl get all --show-labels
NAME                             READY   STATUS    RESTARTS   AGE   LABELS
pod/dev-myweb-655b696755-7cmsz   1/1     Running   0          18s   app=myweb,org=IBM,pod-template-hash=655b696755
pod/myweb-655b696755-xjgn6       1/1     Running   0          74s   app=myweb,org=IBM,pod-template-hash=655b696755

NAME                        READY   UP-TO-DATE   AVAILABLE   AGE   LABELS
deployment.apps/dev-myweb   1/1     1            1           18s   app=myweb,org=IBM
deployment.apps/myweb       1/1     1            1           74s   app=myweb,org=IBM

NAME                                   DESIRED   CURRENT   READY   AGE   LABELS
replicaset.apps/dev-myweb-655b696755   1         1         1       18s   app=myweb,org=IBM,pod-template-hash=655b696755
replicaset.apps/myweb-655b696755       1         1         1       74s   app=myweb,org=IBM,pod-template-hash=655b696755
[student@workstation base]$ 
[student@workstation base]$ kubectl apply -k ../overlays/prod/
deployment.apps/prod-myweb created
[student@workstation base]$ kubectl get all --show-labels
NAME                              READY   STATUS    RESTARTS   AGE     LABELS
pod/dev-myweb-655b696755-7cmsz    1/1     Running   0          84s     app=myweb,org=IBM,pod-template-hash=655b696755
pod/myweb-655b696755-xjgn6        1/1     Running   0          2m20s   app=myweb,org=IBM,pod-template-hash=655b696755
pod/prod-myweb-655b696755-g8fcp   1/1     Running   0          22s     app=myweb,org=IBM,pod-template-hash=655b696755

NAME                         READY   UP-TO-DATE   AVAILABLE   AGE     LABELS
deployment.apps/dev-myweb    1/1     1            1           84s     app=myweb,org=IBM
deployment.apps/myweb        1/1     1            1           2m20s   app=myweb,org=IBM
deployment.apps/prod-myweb   1/1     1            1           22s     app=myweb,org=IBM

NAME                                    DESIRED   CURRENT   READY   AGE     LABELS
replicaset.apps/dev-myweb-655b696755    1         1         1       84s     app=myweb,org=IBM,pod-template-hash=655b696755
replicaset.apps/myweb-655b696755        1         1         1       2m20s   app=myweb,org=IBM,pod-template-hash=655b696755
replicaset.apps/prod-myweb-655b696755   1         1         1       22s     app=myweb,org=IBM,pod-template-hash=655b696755
[student@workstation base]$ 
[student@workstation base]$ 
[student@workstation base]$ kubectl delete -k . 
deployment.apps "myweb" deleted
[student@workstation base]$ kubectl delete -k ../overlays/dev/
deployment.apps "dev-myweb" deleted
[student@workstation base]$ kubectl delete -k ../overlays/prod/
deployment.apps "prod-myweb" deleted
[student@workstation base]$ 
[student@workstation base]$ 
[student@workstation base]$ kubectl get all
No resources found in vkndeo-project-kustomize namespace.
[student@workstation base]$ 
[student@workstation base]$ 
[student@workstation base]$ cat ../overlays/dev/kustomization.yaml 
bases:
  - ../../base
namePrefix: dev-
[student@workstation base]$ 
[student@workstation base]$ 
[student@workstation base]$ vim ../overlays/dev/kustomization.yaml
[student@workstation base]$ cat ../overlays/dev/kustomization.yaml
bases:
  - ../../base
namePrefix: dev-
commonLabels:
  env: dev
[student@workstation base]$ 
[student@workstation base]$ 
[student@workstation base]$ vim ../overlays/prod/kustomization.yaml 
[student@workstation base]$ cat ../overlays/prod/kustomization.yaml
bases:
  - ../../base
namePrefix: prod-
commonLabels:
  env: prod
[student@workstation base]$ 
[student@workstation base]$ 
[student@workstation base]$ kubectl apply -k ../overlays/dev/
deployment.apps/dev-myweb created
[student@workstation base]$ kubectl get all --show-labels
NAME                             READY   STATUS    RESTARTS   AGE   LABELS
pod/dev-myweb-6cc9f45cc7-6r2xx   1/1     Running   0          18s   app=myweb,env=dev,org=IBM,pod-template-hash=6cc9f45cc7

NAME                        READY   UP-TO-DATE   AVAILABLE   AGE   LABELS
deployment.apps/dev-myweb   1/1     1            1           18s   app=myweb,env=dev,org=IBM

NAME                                   DESIRED   CURRENT   READY   AGE   LABELS
replicaset.apps/dev-myweb-6cc9f45cc7   1         1         1       18s   app=myweb,env=dev,org=IBM,pod-template-hash=6cc9f45cc7
[student@workstation base]$ 
[student@workstation base]$ 
[student@workstation base]$ kubectl apply -k ../overlays/prod/
deployment.apps/prod-myweb created
[student@workstation base]$ kubectl get all --show-labels
NAME                              READY   STATUS    RESTARTS   AGE   LABELS
pod/dev-myweb-6cc9f45cc7-6r2xx    1/1     Running   0          67s   app=myweb,env=dev,org=IBM,pod-template-hash=6cc9f45cc7
pod/prod-myweb-677cbd9bbf-nptm9   1/1     Running   0          22s   app=myweb,env=prod,org=IBM,pod-template-hash=677cbd9bbf

NAME                         READY   UP-TO-DATE   AVAILABLE   AGE   LABELS
deployment.apps/dev-myweb    1/1     1            1           67s   app=myweb,env=dev,org=IBM
deployment.apps/prod-myweb   1/1     1            1           22s   app=myweb,env=prod,org=IBM

NAME                                    DESIRED   CURRENT   READY   AGE   LABELS
replicaset.apps/dev-myweb-6cc9f45cc7    1         1         1       67s   app=myweb,env=dev,org=IBM,pod-template-hash=6cc9f45cc7
replicaset.apps/prod-myweb-677cbd9bbf   1         1         1       22s   app=myweb,env=prod,org=IBM,pod-template-hash=677cbd9bbf
[student@workstation base]$ 
[student@workstation base]$ 
[student@workstation base]$ 
[student@workstation base]$ kubectl get all --show-labels
NAME                              READY   STATUS    RESTARTS   AGE    LABELS
pod/dev-myweb-6cc9f45cc7-6r2xx    1/1     Running   0          2m9s   app=myweb,env=dev,org=IBM,pod-template-hash=6cc9f45cc7
pod/prod-myweb-677cbd9bbf-nptm9   1/1     Running   0          84s    app=myweb,env=prod,org=IBM,pod-template-hash=677cbd9bbf

NAME                         READY   UP-TO-DATE   AVAILABLE   AGE    LABELS
deployment.apps/dev-myweb    1/1     1            1           2m9s   app=myweb,env=dev,org=IBM
deployment.apps/prod-myweb   1/1     1            1           84s    app=myweb,env=prod,org=IBM

NAME                                    DESIRED   CURRENT   READY   AGE    LABELS
replicaset.apps/dev-myweb-6cc9f45cc7    1         1         1       2m9s   app=myweb,env=dev,org=IBM,pod-template-hash=6cc9f45cc7
replicaset.apps/prod-myweb-677cbd9bbf   1         1         1       84s    app=myweb,env=prod,org=IBM,pod-template-hash=677cbd9bbf
[student@workstation base]$ 
[student@workstation base]$ 
[student@workstation base]$ kubectl eec -it dev-myweb-6cc9f45cc7-6r2xx -- curl localhost:8080 
Error: unknown command "eec" for "kubectl"

Did you mean this?
	set
	get
	exec

Run 'kubectl --help' for usage.
[student@workstation base]$ kubectl exec -it dev-myweb-6cc9f45cc7-6r2xx -- curl localhost:8080 
Hi!
[student@workstation base]$ 
[student@workstation base]$ kubectl exec -it prod-myweb-677cbd9bbf-nptm9 -- curl localhost:8080 
Hi!
[student@workstation base]$ 
[student@workstation base]$ kubectl delete -k ../overlays/dev/
deployment.apps "dev-myweb" deleted
[student@workstation base]$ vim ../overlays/dev/kustomization.yaml 
[student@workstation base]$ cat ../overlays/dev/kustomization.yaml
bases:
  - ../../base
namePrefix: dev-
commonLabels:
  env: dev
[student@workstation base]$ 
[student@workstation base]$ 
[student@workstation base]$ vim ../overlays/dev/kustomization.yaml 
[student@workstation base]$ cat ../overlays/dev/kustomization.yaml
bases:
  - ../../base
namePrefix: dev-
commonLabels:
  env: dev
images:
  - name: quay.io/redhattraining/versioned-hello
    newTag: v1.1
[student@workstation base]$ 
[student@workstation base]$ kubectl apply -k ../overlays/dev/
deployment.apps/dev-myweb created
[student@workstation base]$ kubectl get all --show-labels 
NAME                              READY   STATUS    RESTARTS   AGE     LABELS
pod/dev-myweb-7958b4bc7d-58wvr    1/1     Running   0          18s     app=myweb,env=dev,org=IBM,pod-template-hash=7958b4bc7d
pod/prod-myweb-677cbd9bbf-nptm9   1/1     Running   0          5m50s   app=myweb,env=prod,org=IBM,pod-template-hash=677cbd9bbf

NAME                         READY   UP-TO-DATE   AVAILABLE   AGE     LABELS
deployment.apps/dev-myweb    1/1     1            1           18s     app=myweb,env=dev,org=IBM
deployment.apps/prod-myweb   1/1     1            1           5m50s   app=myweb,env=prod,org=IBM

NAME                                    DESIRED   CURRENT   READY   AGE     LABELS
replicaset.apps/dev-myweb-7958b4bc7d    1         1         1       18s     app=myweb,env=dev,org=IBM,pod-template-hash=7958b4bc7d
replicaset.apps/prod-myweb-677cbd9bbf   1         1         1       5m50s   app=myweb,env=prod,org=IBM,pod-template-hash=677cbd9bbf
[student@workstation base]$ kubectl exec -it prod-myweb-677cbd9bbf-nptm9 -- curl localhost:8080 
Hi!
[student@workstation base]$ 
[student@workstation base]$ 
[student@workstation base]$ 
[student@workstation base]$ kubectl exec -it dev-myweb-7958b4bc7d-58wvr -- curl localhost:8080
Hi! v1.1
[student@workstation base]$ 
[student@workstation base]$ 
[student@workstation base]$ 
[student@workstation base]$ kubectl delete -k ../overlays/prod/
deployment.apps "prod-myweb" deleted
[student@workstation base]$ kubectl delete -k ../overlays/dev/
deployment.apps "dev-myweb" deleted
[student@workstation base]$ 
[student@workstation base]$ 
[student@workstation base]$ kubectl get all
No resources found in vkndeo-project-kustomize namespace.
[student@workstation base]$ 
[student@workstation base]$ 
[student@workstation base]$ cp deployment.yaml ../overlays/dev/replica-count.yaml
[student@workstation base]$ vim ../overlays/dev/replica-count.yaml
[student@workstation base]$ cat ../overlays/dev/replica-count.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: myweb
spec:
  replicas: 2
[student@workstation base]$ 
[student@workstation base]$ 
[student@workstation base]$ cp ../overlays/dev/replica-count.yaml ../overlays/prod/
[student@workstation base]$ vim ../overlays/prod/replica-count.yaml 
[student@workstation base]$ cat ../overlays/prod/replica-count.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: myweb
spec:
  replicas: 3
[student@workstation base]$ 
[student@workstation base]$ cat ../overlays/dev/kustomization.yaml 
bases:
  - ../../base
namePrefix: dev-
commonLabels:
  env: dev
images:
  - name: quay.io/redhattraining/versioned-hello
    newTag: v1.1
[student@workstation base]$ 
[student@workstation base]$ 
[student@workstation base]$ vim ../overlays/dev/kustomization.yaml
[student@workstation base]$ cat ../overlays/dev/kustomization.yaml
bases:
  - ../../base
namePrefix: dev-
commonLabels:
  env: dev
images:
  - name: quay.io/redhattraining/versioned-hello
    newTag: v1.1
patches:
  - replica-count.yaml
[student@workstation base]$ 
[student@workstation base]$ 
[student@workstation base]$ vim ../overlays/prod/kustomization.yaml 
[student@workstation base]$ cat ../overlays/prod/kustomization.yaml
bases:
  - ../../base
namePrefix: prod-
commonLabels:
  env: prod
patches:
  - replica-count.yaml
[student@workstation base]$ 
[student@workstation base]$ 
[student@workstation base]$ kubectl apply -k ../overlays/dev/
deployment.apps/dev-myweb created
[student@workstation base]$ kubectl get all --show-labels 
NAME                             READY   STATUS    RESTARTS   AGE   LABELS
pod/dev-myweb-7958b4bc7d-49cb4   1/1     Running   0          16s   app=myweb,env=dev,org=IBM,pod-template-hash=7958b4bc7d
pod/dev-myweb-7958b4bc7d-c6nl7   1/1     Running   0          16s   app=myweb,env=dev,org=IBM,pod-template-hash=7958b4bc7d

NAME                        READY   UP-TO-DATE   AVAILABLE   AGE   LABELS
deployment.apps/dev-myweb   2/2     2            2           17s   app=myweb,env=dev,org=IBM

NAME                                   DESIRED   CURRENT   READY   AGE   LABELS
replicaset.apps/dev-myweb-7958b4bc7d   2         2         2       17s   app=myweb,env=dev,org=IBM,pod-template-hash=7958b4bc7d
[student@workstation base]$ kubectl apply -k ../overlays/prod/
deployment.apps/prod-myweb created
[student@workstation base]$ kubectl get all --show-labels 
NAME                              READY   STATUS    RESTARTS   AGE     LABELS
pod/dev-myweb-7958b4bc7d-49cb4    1/1     Running   0          6m21s   app=myweb,env=dev,org=IBM,pod-template-hash=7958b4bc7d
pod/dev-myweb-7958b4bc7d-c6nl7    1/1     Running   0          6m21s   app=myweb,env=dev,org=IBM,pod-template-hash=7958b4bc7d
pod/prod-myweb-677cbd9bbf-4nbpg   1/1     Running   0          13s     app=myweb,env=prod,org=IBM,pod-template-hash=677cbd9bbf
pod/prod-myweb-677cbd9bbf-mvph2   1/1     Running   0          13s     app=myweb,env=prod,org=IBM,pod-template-hash=677cbd9bbf
pod/prod-myweb-677cbd9bbf-xfvcz   1/1     Running   0          13s     app=myweb,env=prod,org=IBM,pod-template-hash=677cbd9bbf

NAME                         READY   UP-TO-DATE   AVAILABLE   AGE     LABELS
deployment.apps/dev-myweb    2/2     2            2           6m22s   app=myweb,env=dev,org=IBM
deployment.apps/prod-myweb   3/3     3            3           14s     app=myweb,env=prod,org=IBM

NAME                                    DESIRED   CURRENT   READY   AGE     LABELS
replicaset.apps/dev-myweb-7958b4bc7d    2         2         2       6m22s   app=myweb,env=dev,org=IBM,pod-template-hash=7958b4bc7d
replicaset.apps/prod-myweb-677cbd9bbf   3         3         3       14s     app=myweb,env=prod,org=IBM,pod-template-hash=677cbd9bbf
[student@workstation base]$ 
[student@workstation base]$ 
[student@workstation base]$ kubectl delete -k ../overlays/dev/
deployment.apps "dev-myweb" deleted
[student@workstation base]$ 
[student@workstation base]$ 
[student@workstation base]$ kubectl delete -k ../overlays/prod/
deployment.apps "prod-myweb" deleted
[student@workstation base]$ 
[student@workstation base]$ cat ../overlays/dev/kustomization.yaml 
bases:
  - ../../base
namePrefix: dev-
commonLabels:
  env: dev
images:
  - name: quay.io/redhattraining/versioned-hello
    newTag: v1.1
patches:
  - replica-count.yaml
[student@workstation base]$ 
[student@workstation base]$ 
[student@workstation base]$ cat ../overlays/dev/replica-count.yaml 
apiVersion: apps/v1
kind: Deployment
metadata:
  name: myweb
spec:
  replicas: 2
[student@workstation base]$ 
[student@workstation base]$ 
[student@workstation base]$ cd
[student@workstation ~]$ 
[student@workstation ~]$ 
[student@workstation ~]$ 
[student@workstation ~]$ ls
base             DO180-apps  Downloads       mychart                      Pictures        s2i_steps_for_verification
demo             DO288       get_helm.sh     overlays                     Public          Templates
deployment.yaml  DO288-apps  history_12.txt  php-73-ubi8-newer.tar.gz     s2i-demo-httpd  Videos
Desktop          Documents   Music           php-73-ubi8-original.tar.gz  s2i-sample-app
[student@workstation ~]$ podman search quay.io/sanjuraj_rh/busybox
INDEX    NAME                                        DESCRIPTION                                      STARS   OFFICIAL  AUTOMATED
quay.io  quay.io/prometheus/busybox                  # Prometheus Busybox Docker Base Images  [![...  0                 
quay.io  quay.io/libpod/busybox                                                                       0                 
quay.io  quay.io/domino/busybox                                                                       0                 
quay.io  quay.io/quay/busybox                        Busybox base image.                              0                 
quay.io  quay.io/sisense/busybox                                                                      0                 
quay.io  quay.io/openshifttest/busybox                                                                0                 
quay.io  quay.io/asmacdo/busybox                                                                      0                 
quay.io  quay.io/sjenning/busybox                                                                     0                 
quay.io  quay.io/bitnami/postgresql                  Official build of [Bitnami PostgreSQL](https...  0                 
quay.io  quay.io/bioconda/base-glibc-busybox-bash                                                     0                 
quay.io  quay.io/rehman0288/busybox                                                                   0                 
quay.io  quay.io/bitnami/mongodb                     Official build of [Bitnami MongoDB](https://...  0                 
quay.io  quay.io/prometheus/busybox-linux-amd64      Busybox Linux amd64                              0                 
quay.io  quay.io/gauravkumar9130/busybox                                                              0                 
quay.io  quay.io/rh-test.me/busybox                                                                   0                 
quay.io  quay.io/bitnami/redis                       Official build of [Bitnami Redis](https://gi...  0                 
quay.io  quay.io/ppyt/busybox                                                                         0                 
quay.io  quay.io/bitnami/nginx                       Official build of [Bitnami nginx](https://gi...  0                 
quay.io  quay.io/iamplus/busybox                                                                      0                 
quay.io  quay.io/arturobrzut/busybox                                                                  0                 
quay.io  quay.io/anuta/busybox                                                                        0                 
quay.io  quay.io/dockernohub/busybox                                                                  0                 
quay.io  quay.io/swsmirror/busybox                                                                    0                 
quay.io  quay.io/olmtest/busybox-dependencies-index                                                   0                 
quay.io  quay.io/bitnami/mariadb                     Official build of [Bitnami MariaDB](https://...  0                 
[student@workstation ~]$ 


[student@workstation ~]$ podman search quay.io/busybox
INDEX    NAME                                        DESCRIPTION                                      STARS   OFFICIAL  AUTOMATED
quay.io  quay.io/prometheus/busybox                  # Prometheus Busybox Docker Base Images  [![...  0                 
quay.io  quay.io/libpod/busybox                                                                       0                 
quay.io  quay.io/domino/busybox                                                                       0                 
quay.io  quay.io/quay/busybox                        Busybox base image.                              0                 
quay.io  quay.io/sisense/busybox                                                                      0                 
quay.io  quay.io/openshifttest/busybox                                                                0                 
quay.io  quay.io/asmacdo/busybox                                                                      0                 
quay.io  quay.io/sjenning/busybox                                                                     0                 
quay.io  quay.io/bitnami/postgresql                  Official build of [Bitnami PostgreSQL](https...  0                 
quay.io  quay.io/bioconda/base-glibc-busybox-bash                                                     0                 
quay.io  quay.io/rehman0288/busybox                                                                   0                 
quay.io  quay.io/bitnami/mongodb                     Official build of [Bitnami MongoDB](https://...  0                 
quay.io  quay.io/prometheus/busybox-linux-amd64      Busybox Linux amd64                              0                 
quay.io  quay.io/gauravkumar9130/busybox                                                              0                 
quay.io  quay.io/rh-test.me/busybox                                                                   0                 
quay.io  quay.io/bitnami/redis                       Official build of [Bitnami Redis](https://gi...  0                 
quay.io  quay.io/ppyt/busybox                                                                         0                 
quay.io  quay.io/bitnami/nginx                       Official build of [Bitnami nginx](https://gi...  0                 
quay.io  quay.io/iamplus/busybox                                                                      0                 
quay.io  quay.io/arturobrzut/busybox                                                                  0                 
quay.io  quay.io/anuta/busybox                                                                        0                 
quay.io  quay.io/dockernohub/busybox                                                                  0                 
quay.io  quay.io/swsmirror/busybox                                                                    0                 
quay.io  quay.io/olmtest/busybox-dependencies-index                                                   0                 
quay.io  quay.io/bitnami/mariadb                     Official build of [Bitnami MariaDB](https://...  0                 
[student@workstation ~]$ kubectl run mypod --image=quay.io/quay/busybox --dry-run=client -o yaml > pod.yaml
[student@workstation ~]$ 
[student@workstation ~]$ 







[student@workstation ~]$ 
[student@workstation ~]$ 
[student@workstation ~]$ 
[student@workstation ~]$ oc projects 
You have access to the following projects and can switch between them with ' project <projectname>':

    vkndeo-helm
  * vkndeo-project-kustomize
    vkndeo-project-s2i
    vkndeo-project1-oci

Using project "vkndeo-project-kustomize" on server "https://api.ap46a.prod.ole.redhat.com:6443".
[student@workstation ~]$ 
[student@workstation ~]$ oc new-project vkndeo-project-php-s2i 
Now using project "vkndeo-project-php-s2i" on server "https://api.ap46a.prod.ole.redhat.com:6443".

You can add applications to this project with the 'new-app' command. For example, try:

    oc new-app rails-postgresql-example

to build a new example application in Ruby. Or use kubectl to deploy a simple Kubernetes application:

    kubectl create deployment hello-node --image=k8s.gcr.io/serve_hostname

[student@workstation ~]$ oc new-app --name phpmyapp https://github.com/sanjurajrh/php-helloworld
--> Found image 29efb3d (2 months old) in image stream "openshift/php" under tag "7.3-ubi8" for "php"

    Apache 2.4 with PHP 7.3 
    ----------------------- 
    PHP 7.3 available as container is a base platform for building and running various PHP 7.3 applications and frameworks. PHP is an HTML-embedded scripting language. PHP attempts to make it easy for developers to write dynamically generated web pages. PHP also offers built-in database integration for several commercial and non-commercial database management systems, so writing a database-enabled webpage with PHP is fairly simple. The most common use of PHP coding is probably as a replacement for CGI scripts.

    Tags: builder, php, php73, php-73

    * The source repository appears to match: php
    * A source build using source code from https://github.com/sanjurajrh/php-helloworld will be created
      * The resulting image will be pushed to image stream tag "phpmyapp:latest"
      * Use 'oc start-build' to trigger a new build

--> Creating resources ...
    imagestream.image.openshift.io "phpmyapp" created
    buildconfig.build.openshift.io "phpmyapp" created
    deployment.apps "phpmyapp" created
    service "phpmyapp" created
--> Success
    Build scheduled, use 'oc logs -f buildconfig/phpmyapp' to track its progress.
    Application is not exposed. You can expose services to the outside world by executing one or more of the commands below:
     'oc expose service/phpmyapp' 
    Run 'oc status' to view your app.
[student@workstation ~]$ oc logs -f buildconfig/phpmyapp
Cloning "https://github.com/sanjurajrh/php-helloworld" ...
	Commit:	85ad78f068b73b6f56d15991d7a07c8507960883 (Update index.php)
	Author:	sanjurajrh <84304865+sanjurajrh@users.noreply.github.com>
	Date:	Wed Jan 5 08:55:11 2022 +0530
Caching blobs under "/var/cache/blobs".
Getting image source signatures
Copying blob sha256:63f9f4c31162a6a5dacd999a0dc65007e15b2ca6b2d9360a1234c27de12e7f38
Copying blob sha256:ce3c6836540f978b55c511d236429e26b7a45f5a6f1204ab8d4378afaf77332f
Copying blob sha256:d49355ce848e2c86326ad8d7c3e4905e2883c89e1f6b79553427f1acf21ea7d1
Copying blob sha256:26d499714bd84804b261b0f2b497a2c2534eac78b8973e70ecda08fbde37a6b6
Copying blob sha256:0fc972655972b3a911d7d9adf0faacb870f7989f9129ff37569d96ca82c1ee8b
Copying config sha256:29efb3d86eb58d49f4c71b7f0a1e97a77adc0c09f448b3c6157b7d6cdaa835d8
Writing manifest to image destination
Storing signatures
Generating dockerfile with builder image image-registry.openshift-image-registry.svc:5000/openshift/php@sha256:35ebf58045d740f1c9082c71e1a581fa093881fbe5d88f7da149d46034625757
STEP 1: FROM image-registry.openshift-image-registry.svc:5000/openshift/php@sha256:35ebf58045d740f1c9082c71e1a581fa093881fbe5d88f7da149d46034625757
STEP 2: LABEL "io.openshift.build.commit.ref"="main"       "io.openshift.build.commit.message"="Update index.php"       "io.openshift.build.source-location"="https://github.com/sanjurajrh/php-helloworld"       "io.openshift.build.image"="image-registry.openshift-image-registry.svc:5000/openshift/php@sha256:35ebf58045d740f1c9082c71e1a581fa093881fbe5d88f7da149d46034625757"       "io.openshift.build.commit.author"="sanjurajrh <84304865+sanjurajrh@users.noreply.github.com>"       "io.openshift.build.commit.date"="Wed Jan 5 08:55:11 2022 +0530"       "io.openshift.build.commit.id"="85ad78f068b73b6f56d15991d7a07c8507960883"
STEP 3: ENV OPENSHIFT_BUILD_NAME="phpmyapp-1"     OPENSHIFT_BUILD_NAMESPACE="vkndeo-project-php-s2i"     OPENSHIFT_BUILD_SOURCE="https://github.com/sanjurajrh/php-helloworld"     OPENSHIFT_BUILD_COMMIT="85ad78f068b73b6f56d15991d7a07c8507960883"
STEP 4: USER root
STEP 5: COPY upload/src /tmp/src
STEP 6: RUN chown -R 1001:0 /tmp/src
time="2022-04-13T05:34:05Z" level=warning msg="Path \"/run/secrets/etc-pki-entitlement\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
time="2022-04-13T05:34:05Z" level=warning msg="Path \"/run/secrets/redhat.repo\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
STEP 7: USER 1001
STEP 8: RUN /usr/libexec/s2i/assemble
time="2022-04-13T05:34:06Z" level=warning msg="Path \"/run/secrets/etc-pki-entitlement\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
time="2022-04-13T05:34:06Z" level=warning msg="Path \"/run/secrets/redhat.repo\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
---> Installing application source...
=> sourcing 20-copy-config.sh ...
---> 05:34:07     Processing additional arbitrary httpd configuration provided by s2i ...
=> sourcing 00-documentroot.conf ...
=> sourcing 50-mpm-tuning.conf ...
=> sourcing 40-ssl-certs.sh ...
STEP 9: CMD /usr/libexec/s2i/run
STEP 10: COMMIT temp.builder.openshift.io/vkndeo-project-php-s2i/phpmyapp-1:4c67bd84
Getting image source signatures
Copying blob sha256:0d3f22d60daf4a2421b2239fb0e1c6ec02d3787274db8b098fb648941ea2d5dc
Copying blob sha256:0488bd866f642b2b1b5490f5c50d628815e4e8fa1f7cae57d52c67c1e9d3e2cc
Copying blob sha256:168d524b4a7c06b8494887f9aec66feb53132b726e95b51392d823d4ae2a8e09
Copying blob sha256:714b6d92c03a24302e1b6ae807999fe887bdc77505a7bbe79e05382ff9552491
Copying blob sha256:39fc63aa6b2ae7ca6d7eeae141f9d66465df6658f7e47d85ecd7d83c1450a52a
Copying blob sha256:3e38f4cd8035e60ec5def9f4f23ce8fabed2b927f1d39d6973e744db16025749
Copying config sha256:556a389456afa51bc20d914eb2959df38e705efcdb03d00a74869d2c0c961752
Writing manifest to image destination
Storing signatures
--> 556a389456a
556a389456afa51bc20d914eb2959df38e705efcdb03d00a74869d2c0c961752

Pushing image image-registry.openshift-image-registry.svc:5000/vkndeo-project-php-s2i/phpmyapp:latest ...
Getting image source signatures
Copying blob sha256:3e38f4cd8035e60ec5def9f4f23ce8fabed2b927f1d39d6973e744db16025749
Copying blob sha256:26d499714bd84804b261b0f2b497a2c2534eac78b8973e70ecda08fbde37a6b6
Copying blob sha256:0fc972655972b3a911d7d9adf0faacb870f7989f9129ff37569d96ca82c1ee8b
Copying blob sha256:d49355ce848e2c86326ad8d7c3e4905e2883c89e1f6b79553427f1acf21ea7d1
Copying blob sha256:63f9f4c31162a6a5dacd999a0dc65007e15b2ca6b2d9360a1234c27de12e7f38
Copying blob sha256:ce3c6836540f978b55c511d236429e26b7a45f5a6f1204ab8d4378afaf77332f
Copying config sha256:556a389456afa51bc20d914eb2959df38e705efcdb03d00a74869d2c0c961752
Writing manifest to image destination
Storing signatures
Successfully pushed image-registry.openshift-image-registry.svc:5000/vkndeo-project-php-s2i/phpmyapp@sha256:453d4806c1249dc56a7756ada3ad4664b1bb6094343faa9f198eedaa3ce08aa1
Push successful
[student@workstation ~]$ oc get pods 
NAME                        READY   STATUS      RESTARTS   AGE
phpmyapp-1-build            0/1     Completed   0          3m56s
phpmyapp-6d5db84c8f-c7snv   1/1     Running     0          3m4s
[student@workstation ~]$ oc get svc 
NAME       TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)             AGE
phpmyapp   ClusterIP   172.30.14.247   <none>        8080/TCP,8443/TCP   4m20s
[student@workstation ~]$ oc get route 
No resources found in vkndeo-project-php-s2i namespace.
[student@workstation ~]$ oc expose svc/phpmyapp
route.route.openshift.io/phpmyapp exposed
[student@workstation ~]$ oc get route 
NAME       HOST/PORT                                                        PATH   SERVICES   PORT       TERMINATION   WILDCARD
phpmyapp   phpmyapp-vkndeo-project-php-s2i.apps.ap46a.prod.ole.redhat.com          phpmyapp   8080-tcp                 None
[student@workstation ~]$ 
[student@workstation ~]$ 
[student@workstation ~]$ curl phpmyapp-vkndeo-project-php-s2i.apps.ap46a.prod.ole.redhat.com
Hello, World! php version is 7.3.20
[student@workstation ~]$ 
[student@workstation ~]$ 
[student@workstation ~]$ 
[student@workstation ~]$ oc get all
NAME                            READY   STATUS      RESTARTS   AGE
pod/phpmyapp-1-build            0/1     Completed   0          5m6s
pod/phpmyapp-6d5db84c8f-c7snv   1/1     Running     0          4m14s

NAME               TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)             AGE
service/phpmyapp   ClusterIP   172.30.14.247   <none>        8080/TCP,8443/TCP   5m7s

NAME                       READY   UP-TO-DATE   AVAILABLE   AGE
deployment.apps/phpmyapp   1/1     1            1           5m7s

NAME                                  DESIRED   CURRENT   READY   AGE
replicaset.apps/phpmyapp-6d5db84c8f   1         1         1       4m14s
replicaset.apps/phpmyapp-7d499c68bb   0         0         0       5m7s

NAME                                      TYPE     FROM   LATEST
buildconfig.build.openshift.io/phpmyapp   Source   Git    1

NAME                                  TYPE     FROM          STATUS     STARTED         DURATION
build.build.openshift.io/phpmyapp-1   Source   Git@85ad78f   Complete   5 minutes ago   54s

NAME                                      IMAGE REPOSITORY                                                                                        TAGS     UPDATED
imagestream.image.openshift.io/phpmyapp   default-route-openshift-image-registry.apps.ap46a.prod.ole.redhat.com/vkndeo-project-php-s2i/phpmyapp   latest   4 minutes ago

NAME                                HOST/PORT                                                        PATH   SERVICES   PORT       TERMINATION   WILDCARD
route.route.openshift.io/phpmyapp   phpmyapp-vkndeo-project-php-s2i.apps.ap46a.prod.ole.redhat.com          phpmyapp   8080-tcp                 None
[student@workstation ~]$ oc projects 
You have access to the following projects and can switch between them with ' project <projectname>':

    vkndeo-helm
    vkndeo-project-kustomize
  * vkndeo-project-php-s2i
    vkndeo-project-s2i
    vkndeo-project1-oci

Using project "vkndeo-project-php-s2i" on server "https://api.ap46a.prod.ole.redhat.com:6443".
[student@workstation ~]$ oc edit bc//phpmyapp 
error: arguments in resource/name form may not have more than one slash
[student@workstation ~]$ oc edit bc/phpmyapp 
Edit cancelled, no changes made.
[student@workstation ~]$ oc get bc/phpmyapp -o yaml > bc.yaml 
[student@workstation ~]$ vim bc.yaml
[student@workstation ~]$ oc get build
NAME         TYPE     FROM          STATUS     STARTED          DURATION
phpmyapp-1   Source   Git@85ad78f   Complete   14 minutes ago   54s
[student@workstation ~]$ oc start-build bc/phpmyapp
build.build.openshift.io/phpmyapp-2 started
[student@workstation ~]$ oc get build
NAME         TYPE     FROM          STATUS     STARTED          DURATION
phpmyapp-1   Source   Git@85ad78f   Complete   16 minutes ago   54s
phpmyapp-2   Source   Git@5cb9a11   Running    6 seconds ago    
[student@workstation ~]$ oc logs -f bc/phpmyapp
Cloning "https://github.com/sanjurajrh/php-helloworld" ...
	Commit:	5cb9a114a91fc8ec644b8f3867c064a85415da4a (Update index.php)
	Author:	sanjurajrh <84304865+sanjurajrh@users.noreply.github.com>
	Date:	Wed Apr 13 11:18:48 2022 +0530
Caching blobs under "/var/cache/blobs".
Getting image source signatures
Copying blob sha256:63f9f4c31162a6a5dacd999a0dc65007e15b2ca6b2d9360a1234c27de12e7f38
Copying blob sha256:26d499714bd84804b261b0f2b497a2c2534eac78b8973e70ecda08fbde37a6b6
Copying blob sha256:0fc972655972b3a911d7d9adf0faacb870f7989f9129ff37569d96ca82c1ee8b
Copying blob sha256:ce3c6836540f978b55c511d236429e26b7a45f5a6f1204ab8d4378afaf77332f
Copying blob sha256:d49355ce848e2c86326ad8d7c3e4905e2883c89e1f6b79553427f1acf21ea7d1
Copying config sha256:29efb3d86eb58d49f4c71b7f0a1e97a77adc0c09f448b3c6157b7d6cdaa835d8
Writing manifest to image destination
Storing signatures
^C
[student@workstation ~]$ oc cancel-build bc/phpmyapp
build.build.openshift.io/phpmyapp-2 marked for cancellation, waiting to be cancelled
build.build.openshift.io/phpmyapp-2 cancelled
[student@workstation ~]$ oc get build 
NAME         TYPE     FROM          STATUS                       STARTED          DURATION
phpmyapp-1   Source   Git@85ad78f   Complete                     16 minutes ago   54s
phpmyapp-2   Source   Git@5cb9a11   Cancelled (CancelledBuild)   44 seconds ago   39s
[student@workstation ~]$ oc get pods 
NAME                        READY   STATUS      RESTARTS   AGE
phpmyapp-1-build            0/1     Completed   0          17m
phpmyapp-6d5db84c8f-c7snv   1/1     Running     0          16m
[student@workstation ~]$ oc start-build -F bc/phpmyapp
build.build.openshift.io/phpmyapp-3 started
Cloning "https://github.com/sanjurajrh/php-helloworld" ...
	Commit:	5cb9a114a91fc8ec644b8f3867c064a85415da4a (Update index.php)
	Author:	sanjurajrh <84304865+sanjurajrh@users.noreply.github.com>
	Date:	Wed Apr 13 11:18:48 2022 +0530
Caching blobs under "/var/cache/blobs".
Getting image source signatures
Copying blob sha256:63f9f4c31162a6a5dacd999a0dc65007e15b2ca6b2d9360a1234c27de12e7f38
Copying blob sha256:ce3c6836540f978b55c511d236429e26b7a45f5a6f1204ab8d4378afaf77332f
Copying blob sha256:d49355ce848e2c86326ad8d7c3e4905e2883c89e1f6b79553427f1acf21ea7d1
Copying blob sha256:26d499714bd84804b261b0f2b497a2c2534eac78b8973e70ecda08fbde37a6b6
Copying blob sha256:0fc972655972b3a911d7d9adf0faacb870f7989f9129ff37569d96ca82c1ee8b
Copying config sha256:29efb3d86eb58d49f4c71b7f0a1e97a77adc0c09f448b3c6157b7d6cdaa835d8
Writing manifest to image destination
Storing signatures
Generating dockerfile with builder image image-registry.openshift-image-registry.svc:5000/openshift/php@sha256:35ebf58045d740f1c9082c71e1a581fa093881fbe5d88f7da149d46034625757
STEP 1: FROM image-registry.openshift-image-registry.svc:5000/openshift/php@sha256:35ebf58045d740f1c9082c71e1a581fa093881fbe5d88f7da149d46034625757
STEP 2: LABEL "io.openshift.build.commit.author"="sanjurajrh <84304865+sanjurajrh@users.noreply.github.com>"       "io.openshift.build.commit.date"="Wed Apr 13 11:18:48 2022 +0530"       "io.openshift.build.commit.id"="5cb9a114a91fc8ec644b8f3867c064a85415da4a"       "io.openshift.build.commit.ref"="main"       "io.openshift.build.commit.message"="Update index.php"       "io.openshift.build.source-location"="https://github.com/sanjurajrh/php-helloworld"       "io.openshift.build.image"="image-registry.openshift-image-registry.svc:5000/openshift/php@sha256:35ebf58045d740f1c9082c71e1a581fa093881fbe5d88f7da149d46034625757"
STEP 3: ENV OPENSHIFT_BUILD_NAME="phpmyapp-3"     OPENSHIFT_BUILD_NAMESPACE="vkndeo-project-php-s2i"     OPENSHIFT_BUILD_SOURCE="https://github.com/sanjurajrh/php-helloworld"     OPENSHIFT_BUILD_COMMIT="5cb9a114a91fc8ec644b8f3867c064a85415da4a"
STEP 4: USER root
STEP 5: COPY upload/src /tmp/src
STEP 6: RUN chown -R 1001:0 /tmp/src
time="2022-04-13T05:51:39Z" level=warning msg="Path \"/run/secrets/etc-pki-entitlement\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
time="2022-04-13T05:51:39Z" level=warning msg="Path \"/run/secrets/redhat.repo\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
STEP 7: USER 1001
STEP 8: RUN /usr/libexec/s2i/assemble
time="2022-04-13T05:51:40Z" level=warning msg="Path \"/run/secrets/etc-pki-entitlement\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
time="2022-04-13T05:51:40Z" level=warning msg="Path \"/run/secrets/redhat.repo\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
---> Installing application source...
=> sourcing 20-copy-config.sh ...
---> 05:51:40     Processing additional arbitrary httpd configuration provided by s2i ...
=> sourcing 00-documentroot.conf ...
=> sourcing 50-mpm-tuning.conf ...
=> sourcing 40-ssl-certs.sh ...
STEP 9: CMD /usr/libexec/s2i/run
STEP 10: COMMIT temp.builder.openshift.io/vkndeo-project-php-s2i/phpmyapp-3:5a424c7f
Getting image source signatures
Copying blob sha256:0d3f22d60daf4a2421b2239fb0e1c6ec02d3787274db8b098fb648941ea2d5dc
Copying blob sha256:0488bd866f642b2b1b5490f5c50d628815e4e8fa1f7cae57d52c67c1e9d3e2cc
Copying blob sha256:168d524b4a7c06b8494887f9aec66feb53132b726e95b51392d823d4ae2a8e09
Copying blob sha256:714b6d92c03a24302e1b6ae807999fe887bdc77505a7bbe79e05382ff9552491
Copying blob sha256:39fc63aa6b2ae7ca6d7eeae141f9d66465df6658f7e47d85ecd7d83c1450a52a
Copying blob sha256:0b1c468105ca3418821d4b9a1f5cae9e6fa697cbf4b2cff2aa9361504bec72d9
Copying config sha256:5b49e6fb357893eb84bd4180e10c176f8a36dc33602b65ea2678b8e77deb1c21
Writing manifest to image destination
Storing signatures
--> 5b49e6fb357
5b49e6fb357893eb84bd4180e10c176f8a36dc33602b65ea2678b8e77deb1c21

Pushing image image-registry.openshift-image-registry.svc:5000/vkndeo-project-php-s2i/phpmyapp:latest ...
Getting image source signatures
Copying blob sha256:0b1c468105ca3418821d4b9a1f5cae9e6fa697cbf4b2cff2aa9361504bec72d9
Copying blob sha256:0fc972655972b3a911d7d9adf0faacb870f7989f9129ff37569d96ca82c1ee8b
Copying blob sha256:26d499714bd84804b261b0f2b497a2c2534eac78b8973e70ecda08fbde37a6b6
Copying blob sha256:63f9f4c31162a6a5dacd999a0dc65007e15b2ca6b2d9360a1234c27de12e7f38
Copying blob sha256:d49355ce848e2c86326ad8d7c3e4905e2883c89e1f6b79553427f1acf21ea7d1
Copying blob sha256:ce3c6836540f978b55c511d236429e26b7a45f5a6f1204ab8d4378afaf77332f
Copying config sha256:5b49e6fb357893eb84bd4180e10c176f8a36dc33602b65ea2678b8e77deb1c21
Writing manifest to image destination
Storing signatures
Successfully pushed image-registry.openshift-image-registry.svc:5000/vkndeo-project-php-s2i/phpmyapp@sha256:639682d2d796aa814840ecf4ff719f1fa8c8ca8d865a3dc1c21f0bea7e1236d8
Push successful
[student@workstation ~]$ oc get pods 
NAME                        READY   STATUS        RESTARTS   AGE
phpmyapp-1-build            0/1     Completed     0          18m
phpmyapp-3-build            0/1     Completed     0          57s
phpmyapp-6d5db84c8f-c7snv   0/1     Terminating   0          17m
phpmyapp-85887bb8d5-fkdkd   1/1     Running       0          9s
[student@workstation ~]$ o cget pods 
bash: o: command not found...
[student@workstation ~]$ oc get pods 
NAME                        READY   STATUS      RESTARTS   AGE
phpmyapp-1-build            0/1     Completed   0          18m
phpmyapp-3-build            0/1     Completed   0          72s
phpmyapp-85887bb8d5-fkdkd   1/1     Running     0          24s
[student@workstation ~]$ curl phpmyapp-vkndeo-project-php-s2i.apps.ap46a.prod.ole.redhat.com
<br />
<b>Parse error</b>:  syntax error, unexpected '\' (T_NS_SEPARATOR) in <b>/opt/app-root/src/index.php</b> on line <b>3</b><br />
[student@workstation ~]$ 
[student@workstation ~]$ 
[student@workstation ~]$ oc start-build --help 
Start a build

 This command starts a new build for the provided build config or copies an existing build using --from-build=<name> .
Pass the --follow flag to see output from the build.

 In addition, you can pass a file, directory, or source code repository with the --from-file, --from-dir, or --from-repo
flags directly to the build. The contents will be streamed to the build and override the current build source settings.
When using --from-repo, the --commit flag can be used to control which branch, tag, or commit is sent to the server. If
you pass --from-file, the file is placed in the root of an empty directory with the same filename. It is also possible
to pass a http or https url to --from-file and --from-archive, however authentication is not supported and in case of
https the certificate must be valid and recognized by your system.

 Note that builds triggered from binary input will not preserve the source on the server, so rebuilds triggered by base
image changes will use the source specified on the build config.

Usage:
  oc start-build (BUILDCONFIG | --from-build=BUILD) [flags]

Examples:
  # Starts build from build config "hello-world"
  oc start-build hello-world
  
  # Starts build from a previous build "hello-world-1"
  oc start-build --from-build=hello-world-1
  
  # Use the contents of a directory as build input
  oc start-build hello-world --from-dir=src/
  
  # Send the contents of a Git repository to the server from tag 'v2'
  oc start-build hello-world --from-repo=../hello-world --commit=v2
  
  # Start a new build for build config "hello-world" and watch the logs until the build
  # completes or fails.
  oc start-build hello-world --follow
  
  # Start a new build for build config "hello-world" and wait until the build completes. It
  # exits with a non-zero return code if the build fails.
  oc start-build hello-world --wait

Options:
      --allow-missing-template-keys=true: If true, ignore any errors in templates when a field or map key is missing in
the template. Only applies to golang and jsonpath output formats.
      --build-arg=[]: Specify a key-value pair to pass to Docker during the build.
      --build-loglevel='': Specify the log level for the build log output
      --commit='': Specify the source code commit identifier the build should use; requires a build based on a Git
repository
  -e, --env=[]: Specify a key-value pair for an environment variable to set for the build container.
      --exclude='(^|/)\.git(/|$)': When using the --from-dir option: regular expression for selecting files from the
source tree to exclude from the build; the default excludes the '.git' directory (see https://golang.org/pkg/regexp for
syntax, but note that "" will be interpreted as allow all files and exclude no files)
  -F, --follow=false: Start a build and watch its logs until it completes or fails
      --from-archive='': An archive (tar, tar.gz, zip) to be extracted before the build and used as the binary input.
      --from-build='': Specify the name of a build which should be re-run
      --from-dir='': A directory to archive and use as the binary input for a build.
      --from-file='': A file to use as the binary input for the build; example a pom.xml or Dockerfile. Will be the only
file in the build source.
      --from-repo='': The path to a local source code repository to use as the binary input for a build.
      --from-webhook='': Specify a generic webhook URL for an existing build config to trigger
      --git-post-receive='': The contents of the post-receive hook to trigger a build
      --git-repository='': The path to the git repository for post-receive; defaults to the current directory
      --incremental=false: Overrides the incremental setting in a source-strategy build, ignored if not specified
      --list-webhooks='': List the webhooks for the specified build config or build; accepts 'all', 'generic', or
'github'
      --no-cache=false: Overrides the noCache setting in a docker-strategy build, ignored if not specified
  -o, --output='': Output format. One of:
json|yaml|name|go-template|go-template-file|template|templatefile|jsonpath|jsonpath-as-json|jsonpath-file.
      --template='': Template string or path to template file to use when -o=go-template, -o=go-template-file. The
template format is golang templates [http://golang.org/pkg/text/template/#pkg-overview].
  -w, --wait=false: Wait for a build to complete and exit with a non-zero return code if the build fails

Use "oc options" for a list of global command-line options (applies to all commands).
[student@workstation ~]$ oc start-build -F bc/phpmyapp 
build.build.openshift.io/phpmyapp-4 started
Cloning "https://github.com/sanjurajrh/php-helloworld" ...
	Commit:	81ab721c319d8688a6f6af8a4770650463e249c9 (Update index.php with correct syntax)
	Author:	sanjurajrh <84304865+sanjurajrh@users.noreply.github.com>
	Date:	Wed Apr 13 11:23:33 2022 +0530
Caching blobs under "/var/cache/blobs".
Getting image source signatures
Copying blob sha256:63f9f4c31162a6a5dacd999a0dc65007e15b2ca6b2d9360a1234c27de12e7f38
Copying blob sha256:d49355ce848e2c86326ad8d7c3e4905e2883c89e1f6b79553427f1acf21ea7d1
Copying blob sha256:26d499714bd84804b261b0f2b497a2c2534eac78b8973e70ecda08fbde37a6b6
Copying blob sha256:ce3c6836540f978b55c511d236429e26b7a45f5a6f1204ab8d4378afaf77332f
Copying blob sha256:0fc972655972b3a911d7d9adf0faacb870f7989f9129ff37569d96ca82c1ee8b
Copying config sha256:29efb3d86eb58d49f4c71b7f0a1e97a77adc0c09f448b3c6157b7d6cdaa835d8
Writing manifest to image destination
Storing signatures
Generating dockerfile with builder image image-registry.openshift-image-registry.svc:5000/openshift/php@sha256:35ebf58045d740f1c9082c71e1a581fa093881fbe5d88f7da149d46034625757
STEP 1: FROM image-registry.openshift-image-registry.svc:5000/openshift/php@sha256:35ebf58045d740f1c9082c71e1a581fa093881fbe5d88f7da149d46034625757
STEP 2: LABEL "io.openshift.build.image"="image-registry.openshift-image-registry.svc:5000/openshift/php@sha256:35ebf58045d740f1c9082c71e1a581fa093881fbe5d88f7da149d46034625757"       "io.openshift.build.commit.author"="sanjurajrh <84304865+sanjurajrh@users.noreply.github.com>"       "io.openshift.build.commit.date"="Wed Apr 13 11:23:33 2022 +0530"       "io.openshift.build.commit.id"="81ab721c319d8688a6f6af8a4770650463e249c9"       "io.openshift.build.commit.ref"="main"       "io.openshift.build.commit.message"="Update index.php with correct syntax"       "io.openshift.build.source-location"="https://github.com/sanjurajrh/php-helloworld"
STEP 3: ENV OPENSHIFT_BUILD_NAME="phpmyapp-4"     OPENSHIFT_BUILD_NAMESPACE="vkndeo-project-php-s2i"     OPENSHIFT_BUILD_SOURCE="https://github.com/sanjurajrh/php-helloworld"     OPENSHIFT_BUILD_COMMIT="81ab721c319d8688a6f6af8a4770650463e249c9"
STEP 4: USER root
STEP 5: COPY upload/src /tmp/src
STEP 6: RUN chown -R 1001:0 /tmp/src
time="2022-04-13T05:54:56Z" level=warning msg="Path \"/run/secrets/etc-pki-entitlement\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
time="2022-04-13T05:54:56Z" level=warning msg="Path \"/run/secrets/redhat.repo\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
STEP 7: USER 1001
STEP 8: RUN /usr/libexec/s2i/assemble
time="2022-04-13T05:54:57Z" level=warning msg="Path \"/run/secrets/etc-pki-entitlement\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
time="2022-04-13T05:54:57Z" level=warning msg="Path \"/run/secrets/redhat.repo\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
---> Installing application source...
=> sourcing 20-copy-config.sh ...
---> 05:54:58     Processing additional arbitrary httpd configuration provided by s2i ...
=> sourcing 00-documentroot.conf ...
=> sourcing 50-mpm-tuning.conf ...
=> sourcing 40-ssl-certs.sh ...
STEP 9: CMD /usr/libexec/s2i/run
STEP 10: COMMIT temp.builder.openshift.io/vkndeo-project-php-s2i/phpmyapp-4:1d022ca6
Getting image source signatures
Copying blob sha256:0d3f22d60daf4a2421b2239fb0e1c6ec02d3787274db8b098fb648941ea2d5dc
Copying blob sha256:0488bd866f642b2b1b5490f5c50d628815e4e8fa1f7cae57d52c67c1e9d3e2cc
Copying blob sha256:168d524b4a7c06b8494887f9aec66feb53132b726e95b51392d823d4ae2a8e09
Copying blob sha256:714b6d92c03a24302e1b6ae807999fe887bdc77505a7bbe79e05382ff9552491
Copying blob sha256:39fc63aa6b2ae7ca6d7eeae141f9d66465df6658f7e47d85ecd7d83c1450a52a
Copying blob sha256:26165d009de5f13fb4ebca453afdb7c53ccd5027ea08fcee7ab60b770e2291fb
Copying config sha256:8bce2143f053002574ecd736cd5f52a88b8251c468b5a44ae4bc416a8a429229
Writing manifest to image destination
Storing signatures
--> 8bce2143f05
8bce2143f053002574ecd736cd5f52a88b8251c468b5a44ae4bc416a8a429229

Pushing image image-registry.openshift-image-registry.svc:5000/vkndeo-project-php-s2i/phpmyapp:latest ...
Getting image source signatures
Copying blob sha256:0fc972655972b3a911d7d9adf0faacb870f7989f9129ff37569d96ca82c1ee8b
Copying blob sha256:26d499714bd84804b261b0f2b497a2c2534eac78b8973e70ecda08fbde37a6b6
Copying blob sha256:d49355ce848e2c86326ad8d7c3e4905e2883c89e1f6b79553427f1acf21ea7d1
Copying blob sha256:ce3c6836540f978b55c511d236429e26b7a45f5a6f1204ab8d4378afaf77332f
Copying blob sha256:26165d009de5f13fb4ebca453afdb7c53ccd5027ea08fcee7ab60b770e2291fb
Copying blob sha256:63f9f4c31162a6a5dacd999a0dc65007e15b2ca6b2d9360a1234c27de12e7f38
Copying config sha256:8bce2143f053002574ecd736cd5f52a88b8251c468b5a44ae4bc416a8a429229
Writing manifest to image destination
Storing signatures
Successfully pushed image-registry.openshift-image-registry.svc:5000/vkndeo-project-php-s2i/phpmyapp@sha256:acd42764a51c7a35d3ac5f10c4adfa3e82a6608d60eb2352002288c719b29446
Push successful
[student@workstation ~]$ oc get pods 
NAME                        READY   STATUS      RESTARTS   AGE
phpmyapp-1-build            0/1     Completed   0          21m
phpmyapp-3-build            0/1     Completed   0          4m14s
phpmyapp-4-build            0/1     Completed   0          56s
phpmyapp-79447bd499-rvj59   1/1     Running     0          9s
[student@workstation ~]$ curl phpmyapp-vkndeo-project-php-s2i.apps.ap46a.prod.ole.redhat.com
Hello, World! php version is 7.3.20
Hello, World! DO295
[student@workstation ~]$ 
[student@workstation ~]$ 
[student@workstation ~]$ oc get is 
NAME       IMAGE REPOSITORY                                                                                        TAGS     UPDATED
phpmyapp   default-route-openshift-image-registry.apps.ap46a.prod.ole.redhat.com/vkndeo-project-php-s2i/phpmyapp   latest   About a minute ago
[student@workstation ~]$ oc describe is 
Name:			phpmyapp
Namespace:		vkndeo-project-php-s2i
Created:		22 minutes ago
Labels:			app=phpmyapp
			app.kubernetes.io/component=phpmyapp
			app.kubernetes.io/instance=phpmyapp
Annotations:		openshift.io/generated-by=OpenShiftNewApp
Image Repository:	default-route-openshift-image-registry.apps.ap46a.prod.ole.redhat.com/vkndeo-project-php-s2i/phpmyapp
Image Lookup:		local=false
Unique Images:		3
Tags:			1

latest
  no spec tag

  * image-registry.openshift-image-registry.svc:5000/vkndeo-project-php-s2i/phpmyapp@sha256:acd42764a51c7a35d3ac5f10c4adfa3e82a6608d60eb2352002288c719b29446
      About a minute ago
    image-registry.openshift-image-registry.svc:5000/vkndeo-project-php-s2i/phpmyapp@sha256:639682d2d796aa814840ecf4ff719f1fa8c8ca8d865a3dc1c21f0bea7e1236d8
      4 minutes ago
    image-registry.openshift-image-registry.svc:5000/vkndeo-project-php-s2i/phpmyapp@sha256:453d4806c1249dc56a7756ada3ad4664b1bb6094343faa9f198eedaa3ce08aa1
      22 minutes ago
[student@workstation ~]$ oc describe bc 
Name:		phpmyapp
Namespace:	vkndeo-project-php-s2i
Created:	24 minutes ago
Labels:		app=phpmyapp
		app.kubernetes.io/component=phpmyapp
		app.kubernetes.io/instance=phpmyapp
Annotations:	openshift.io/generated-by=OpenShiftNewApp
Latest Version:	4

Strategy:	Source
URL:		https://github.com/sanjurajrh/php-helloworld
From Image:	ImageStreamTag openshift/php:7.3-ubi8
Output to:	ImageStreamTag phpmyapp:latest

Build Run Policy:	Serial
Triggered by:		Config, ImageChange
Webhook GitHub:
	URL:	https://api.ap46a.prod.ole.redhat.com:6443/apis/build.openshift.io/v1/namespaces/vkndeo-project-php-s2i/buildconfigs/phpmyapp/webhooks/<secret>/github
Webhook Generic:
	URL:		https://api.ap46a.prod.ole.redhat.com:6443/apis/build.openshift.io/v1/namespaces/vkndeo-project-php-s2i/buildconfigs/phpmyapp/webhooks/<secret>/generic
	AllowEnv:	false
Builds History Limit:
	Successful:	5
	Failed:		5

Build		Status		Duration	Creation Time
phpmyapp-4 	complete 	47s 		2022-04-13 01:54:15 -0400 EDT
phpmyapp-3 	complete 	48s 		2022-04-13 01:50:57 -0400 EDT
phpmyapp-2 	cancelled 	39s 		2022-04-13 01:49:28 -0400 EDT
phpmyapp-1 	complete 	54s 		2022-04-13 01:33:23 -0400 EDT

Events:	<none>
[student@workstation ~]$ oc edit bc/phpmyapp
Edit cancelled, no changes made.
[student@workstation ~]$ # 8-Lw1_OtJOaww9f5mqxO
[student@workstation ~]$ oc get build 
NAME         TYPE     FROM          STATUS                       STARTED          DURATION
phpmyapp-1   Source   Git@85ad78f   Complete                     27 minutes ago   54s
phpmyapp-2   Source   Git@5cb9a11   Cancelled (CancelledBuild)   11 minutes ago   39s
phpmyapp-3   Source   Git@5cb9a11   Complete                     9 minutes ago    48s
phpmyapp-4   Source   Git@81ab721   Complete                     6 minutes ago    47s
[student@workstation ~]$ curl -X POST https://api.ap46a.prod.ole.redhat.com:6443/apis/build.openshift.io/v1/namespaces/vkndeo-project-php-s2i/buildconfigs/phpmyapp/webhooks/8-Lw1_OtJOaww9f5mqxO/generic 
{"kind":"Build","apiVersion":"build.openshift.io/v1","metadata":{"name":"phpmyapp-5","namespace":"vkndeo-project-php-s2i","selfLink":"/apis/build.openshift.io/v1/namespaces/vkndeo-project-php-s2i/buildconfigs/phpmyapp-5/instantiate","uid":"adf9c5a6-8fe0-44ec-970c-096fc2d01ee0","resourceVersion":"22986485","creationTimestamp":"2022-04-13T06:01:50Z","labels":{"app":"phpmyapp","app.kubernetes.io/component":"phpmyapp","app.kubernetes.io/instance":"phpmyapp","buildconfig":"phpmyapp","openshift.io/build-config.name":"phpmyapp","openshift.io/build.start-policy":"Serial"},"annotations":{"openshift.io/build-config.name":"phpmyapp","openshift.io/build.number":"5"},"ownerReferences":[{"apiVersion":"build.openshift.io/v1","kind":"BuildConfig","name":"phpmyapp","uid":"86cea211-9d38-4e5e-9152-a889b115fdc5","controller":true}],"managedFields":[{"manager":"openshift-apiserver","operation":"Update","apiVersion":"build.openshift.io/v1","time":"2022-04-13T06:01:50Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:openshift.io/build-config.name":{},"f:openshift.io/build.number":{}},"f:labels":{".":{},"f:app":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:buildconfig":{},"f:openshift.io/build-config.name":{},"f:openshift.io/build.start-policy":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"86cea211-9d38-4e5e-9152-a889b115fdc5\"}":{".":{},"f:apiVersion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:output":{"f:to":{".":{},"f:kind":{},"f:name":{}}},"f:serviceAccount":{},"f:source":{"f:git":{".":{},"f:uri":{}},"f:type":{}},"f:strategy":{"f:sourceStrategy":{".":{},"f:from":{".":{},"f:kind":{},"f:name":{}},"f:pullSecret":{".":{},"f:name":{}}},"f:type":{}},"f:triggeredBy":{}},"f:status":{"f:conditions":{".":{},"k:{\"type\":\"New\"}":{".":{},"f:lastTransitionTime":{},"f:lastUpdateTime":{},"f:status":{},"f:type":{}}},"f:config":{".":{},"f:kind":{},"f:name":{},"f:namespace":{}},"f:phase":{}}}}]},"spec":{"serviceAccount":"builder","source":{"type":"Git","git":{"uri":"https://github.com/sanjurajrh/php-helloworld"}},"strategy":{"type":"Source","sourceStrategy":{"from":{"kind":"DockerImage","name":"image-registry.openshift-image-registry.svc:5000/openshift/php@sha256:35ebf58045d740f1c9082c71e1a581fa093881fbe5d88f7da149d46034625757"},"pullSecret":{"name":"builder-dockercfg-758zx"}}},"output":{"to":{"kind":"ImageStreamTag","name":"phpmyapp:latest"}},"resources":{},"postCommit":{},"nodeSelector":null,"triggeredBy":[{"message":"Generic WebHook","genericWebHook":{"secret":"\u003csecret\u003e"}}]},"status":{"phase":"New","config":{"kind":"BuildConfig","namespace":"vkndeo-project-php-s2i","name":"phpmyapp"},"output":{},"conditions":[{"type":"New","status":"True","lastUpdateTime":"2022-04-13T06:01:50Z","lastTransitionTime":"2022-04-13T06:01:50Z"}]}}
{
  "kind": "Status",
  "apiVersion": "v1",
  "metadata": {
    
  },
  "status": "Success",
  "message": "invalid Content-Type on payload, ignoring payload and continuing with build",
  "code": 200
}[student@workstation ~]$ oc get build 
NAME         TYPE     FROM          STATUS                       STARTED          DURATION
phpmyapp-1   Source   Git@85ad78f   Complete                     28 minutes ago   54s
phpmyapp-2   Source   Git@5cb9a11   Cancelled (CancelledBuild)   12 minutes ago   39s
phpmyapp-3   Source   Git@5cb9a11   Complete                     11 minutes ago   48s
phpmyapp-4   Source   Git@81ab721   Complete                     7 minutes ago    47s
phpmyapp-5   Source   Git@81ab721   Running                      14 seconds ago   
[student@workstation ~]$ oc get pods 
NAME                        READY   STATUS      RESTARTS   AGE
phpmyapp-1-build            0/1     Completed   0          28m
phpmyapp-3-build            0/1     Completed   0          11m
phpmyapp-4-build            0/1     Completed   0          8m5s
phpmyapp-5-build            1/1     Running     0          30s
phpmyapp-79447bd499-rvj59   1/1     Running     0          7m18s
[student@workstation ~]$ oc get pods 
NAME                        READY   STATUS      RESTARTS   AGE
phpmyapp-1-build            0/1     Completed   0          29m
phpmyapp-3-build            0/1     Completed   0          11m
phpmyapp-4-build            0/1     Completed   0          8m22s
phpmyapp-5-build            1/1     Running     0          47s
phpmyapp-79447bd499-rvj59   1/1     Running     0          7m35s
[student@workstation ~]$ oc get pods 
NAME                        READY   STATUS        RESTARTS   AGE
phpmyapp-1-build            0/1     Completed     0          29m
phpmyapp-3-build            0/1     Completed     0          11m
phpmyapp-4-build            0/1     Completed     0          8m33s
phpmyapp-5-build            0/1     Completed     0          58s
phpmyapp-79447bd499-rvj59   1/1     Terminating   0          7m46s
phpmyapp-b68d864bb-j86c7    1/1     Running       0          5s
[student@workstation ~]$ oc get pods 
NAME                       READY   STATUS      RESTARTS   AGE
phpmyapp-1-build           0/1     Completed   0          29m
phpmyapp-3-build           0/1     Completed   0          12m
phpmyapp-4-build           0/1     Completed   0          8m59s
phpmyapp-5-build           0/1     Completed   0          84s
phpmyapp-b68d864bb-j86c7   1/1     Running     0          31s
[student@workstation ~]$ history | grep curl 
   48  curl -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3 
   75  kubectl exec -it myweb-884856fbf-gnbd6 -- curl localhost:8080
   93  kubectl exec -it myweb-884856fbf-9g8tr -- curl localhost:8080 
  129  kubectl eec -it dev-myweb-6cc9f45cc7-6r2xx -- curl localhost:8080 
  130  kubectl exec -it dev-myweb-6cc9f45cc7-6r2xx -- curl localhost:8080 
  131  kubectl exec -it prod-myweb-677cbd9bbf-nptm9 -- curl localhost:8080 
  139  kubectl exec -it prod-myweb-677cbd9bbf-nptm9 -- curl localhost:8080 
  140  kubectl exec -it dev-myweb-7958b4bc7d-58wvr -- curl localhost:8080
  177  curl phpmyapp-vkndeo-project-php-s2i.apps.ap46a.prod.ole.redhat.com
  195  curl phpmyapp-vkndeo-project-php-s2i.apps.ap46a.prod.ole.redhat.com
  199  curl phpmyapp-vkndeo-project-php-s2i.apps.ap46a.prod.ole.redhat.com
  206  curl -X POST https://api.ap46a.prod.ole.redhat.com:6443/apis/build.openshift.io/v1/namespaces/vkndeo-project-php-s2i/buildconfigs/phpmyapp/webhooks/8-Lw1_OtJOaww9f5mqxO/generic 
  209  history | grep curl 
[student@workstation ~]$ oc explain bc.spec.runPolicy 
KIND:     BuildConfig
VERSION:  build.openshift.io/v1

FIELD:    runPolicy <string>

DESCRIPTION:
     RunPolicy describes how the new build created from this build configuration
     will be scheduled for execution. This is optional, if not specified we
     default to "Serial".
[student@workstation ~]$ oc new-app -h 
Create a new application by specifying source code, templates, and/or images

 This command will try to build up the components of an application using images, templates, or code that has a public
repository. It will lookup the images on the local Docker installation (if available), a container image registry, an
integrated image stream, or stored templates.

 If you specify a source code URL, it will set up a build that takes your source code and converts it into an image that
can run inside of a pod. Local source must be in a git repository that has a remote repository that the server can see.
The images will be deployed via a deployment or deployment configuration, and a service will be connected to the first
public port of the app. You may either specify components using the various existing flags or let oc new-app autodetect
what kind of components you have provided.

 If you provide source code, a new build will be automatically triggered. You can use 'oc status' to check the progress.

Usage:
  oc new-app (IMAGE | IMAGESTREAM | TEMPLATE | PATH | URL ...) [flags]

Examples:
  # List all local templates and image streams that can be used to create an app
  oc new-app --list
  
  # Create an application based on the source code in the current git repository (with a public remote) and a Docker
image
  oc new-app . --docker-image=repo/langimage
  
  # Create an application myapp with Docker based build strategy expecting binary input
  oc new-app  --strategy=docker --binary --name myapp
  
  # Create a Ruby application based on the provided [image]~[source code] combination
  oc new-app centos/ruby-25-centos7~https://github.com/sclorg/ruby-ex.git
  
  # Use the public Docker Hub MySQL image to create an app. Generated artifacts will be labeled with db=mysql
  oc new-app mysql MYSQL_USER=user MYSQL_PASSWORD=pass MYSQL_DATABASE=testdb -l db=mysql
  
  # Use a MySQL image in a private registry to create an app and override application artifacts' names
  oc new-app --docker-image=myregistry.com/mycompany/mysql --name=private
  
  # Create an application from a remote repository using its beta4 branch
  oc new-app https://github.com/openshift/ruby-hello-world#beta4
  
  # Create an application based on a stored template, explicitly setting a parameter value
  oc new-app --template=ruby-helloworld-sample --param=MYSQL_USER=admin
  
  # Create an application from a remote repository and specify a context directory
  oc new-app https://github.com/youruser/yourgitrepo --context-dir=src/build
  
  # Create an application from a remote private repository and specify which existing secret to use
  oc new-app https://github.com/youruser/yourgitrepo --source-secret=yoursecret
  
  # Create an application based on a template file, explicitly setting a parameter value
  oc new-app --file=./example/myapp/template.json --param=MYSQL_USER=admin
  
  # Search all templates, image streams, and Docker images for the ones that match "ruby"
  oc new-app --search ruby
  
  # Search for "ruby", but only in stored templates (--template, --image-stream and --docker-image
  # can be used to filter search results)
  oc new-app --search --template=ruby
  
  # Search for "ruby" in stored templates and print the output as an YAML
  oc new-app --search --template=ruby --output=yaml

Options:
      --allow-missing-images=false: If true, indicates that referenced Docker images that cannot be found locally or in
a registry should still be used.
      --allow-missing-imagestream-tags=false: If true, indicates that image stream tags that don't exist should still be
used.
      --allow-missing-template-keys=false: If true, ignore any errors in templates when a field or map key is missing in
the template. Only applies to golang and jsonpath output formats.
      --as-deployment-config=false: If true create this application as a deployment config, which allows for hooks and
custom strategies.
      --as-test=false: If true create this application as a test deployment, which validates that the deployment
succeeds and then scales down.
      --binary=false: Instead of expecting a source URL, set the build to expect binary contents. Will disable triggers.
      --build-env=[]: Specify a key-value pair for an environment variable to set into each build image.
      --build-env-file=[]: File containing key-value pairs of environment variables to set into each build image.
      --code=[]: Source code to use to build this application.
      --context-dir='': Context directory to be used for the build.
      --docker-image=[]: Name of a Docker image to include in the app.
      --dry-run=false: If true, show the result of the operation without performing it.
  -e, --env=[]: Specify a key-value pair for an environment variable to set into each container.
      --env-file=[]: File containing key-value pairs of environment variables to set into each container.
  -f, --file=[]: Path to a template file to use for the app.
      --grant-install-rights=false: If true, a component that requires access to your account may use your token to
install software into your project. Only grant images you trust the right to run with your token.
      --group=[]: Indicate components that should be grouped together as <comp1>+<comp2>.
      --ignore-unknown-parameters=false: If true, will not stop processing if a provided parameter does not exist in the
template.
  -i, --image-stream=[]: Name of an image stream to use in the app.
      --insecure-registry=false: If true, indicates that the referenced Docker images are on insecure registries and
should bypass certificate checking
  -l, --labels='': Label to set in all resources for this application.
  -L, --list=false: List all local templates and image streams that can be used to create.
      --name='': Set name to use for generated application artifacts
      --no-install=false: Do not attempt to run images that describe themselves as being installable
  -o, --output='': Output format. One of:
json|yaml|name|go-template|go-template-file|template|templatefile|jsonpath|jsonpath-as-json|jsonpath-file.
      --output-version='': The preferred API versions of the output objects
  -p, --param=[]: Specify a key-value pair (e.g., -p FOO=BAR) to set/override a parameter value in the template.
      --param-file=[]: File containing parameter values to set/override in the template.
  -S, --search=false: Search all templates, image streams, and Docker images that match the arguments provided.
  -a, --show-all=true: When printing, show all resources (false means hide terminated pods.)
      --show-labels=false: When printing, show all labels as the last column (default hide labels column)
      --sort-by='': If non-empty, sort list types using this field specification.  The field specification is expressed
as a JSONPath expression (e.g. '{.metadata.name}'). The field in the API resource specified by this JSONPath expression
must be an integer or a string.
      --source-secret='': The name of an existing secret that should be used for cloning a private git repository.
      --strategy=: Specify the build strategy to use if you don't want to detect (docker|pipeline|source). NOTICE: the
pipeline strategy is deprecated; consider using Jenkinsfiles directly on Jenkins or OpenShift Pipelines.
      --template=[]: Name of a stored template to use in the app.

Use "oc options" for a list of global command-line options (applies to all commands).
[student@workstation ~]$ 
[student@workstation ~]$ 
[student@workstation ~]$ 
[student@workstation ~]$ oc projects 
You have access to the following projects and can switch between them with ' project <projectname>':

    vkndeo-helm
    vkndeo-project-kustomize
  * vkndeo-project-php-s2i
    vkndeo-project-s2i
    vkndeo-project1-oci

Using project "vkndeo-project-php-s2i" on server "https://api.ap46a.prod.ole.redhat.com:6443".
[student@workstation ~]$ oc new-project vkndeo-project-docker-strategy 
Now using project "vkndeo-project-docker-strategy" on server "https://api.ap46a.prod.ole.redhat.com:6443".

You can add applications to this project with the 'new-app' command. For example, try:

    oc new-app rails-postgresql-example

to build a new example application in Ruby. Or use kubectl to deploy a simple Kubernetes application:

    kubectl create deployment hello-node --image=k8s.gcr.io/serve_hostname

[student@workstation ~]$ oc new-app https://github.com/sanjurajrh/ch2dockerfile 
--> Found container image 11f9dba (2 years old) from registry.access.redhat.com for "registry.access.redhat.com/ubi8/ubi:8.0"

    Red Hat Universal Base Image 8 
    ------------------------------ 
    The Universal Base Image is designed and engineered to be the base layer for all of your containerized applications, middleware and utilities. This base image is freely redistributable, but Red Hat only supports Red Hat technologies through subscriptions for Red Hat products. This image is maintained by Red Hat and updated regularly.

    Tags: base rhel8

    * An image stream tag will be created as "ubi:8.0" that will track the source image
    * A Docker build using source code from https://github.com/sanjurajrh/ch2dockerfile will be created
      * The resulting image will be pushed to image stream tag "ch2dockerfile:latest"
      * Every time "ubi:8.0" changes a new build will be triggered

--> Creating resources ...
    imagestream.image.openshift.io "ubi" created
    imagestream.image.openshift.io "ch2dockerfile" created
    buildconfig.build.openshift.io "ch2dockerfile" created
    deployment.apps "ch2dockerfile" created
    service "ch2dockerfile" created
--> Success
    Build scheduled, use 'oc logs -f buildconfig/ch2dockerfile' to track its progress.
    Application is not exposed. You can expose services to the outside world by executing one or more of the commands below:
     'oc expose service/ch2dockerfile' 
    Run 'oc status' to view your app.
[student@workstation ~]$ oc logs -f buildconfig/ch2dockerfile
Cloning "https://github.com/sanjurajrh/ch2dockerfile" ...
	Commit:	4f5cea58932bcacad8c89028753e3f503eb120b9 (Update Dockerfile)
	Author:	sanjurajrh <84304865+sanjurajrh@users.noreply.github.com>
	Date:	Wed Aug 25 14:18:23 2021 +0530
Replaced Dockerfile FROM image registry.access.redhat.com/ubi8/ubi:8.0
Caching blobs under "/var/cache/blobs".

Pulling image registry.access.redhat.com/ubi8/ubi@sha256:8275e2ad7f458e329bdc8c0e7543cff1729998fe515a281d49638246de8e39ee ...
Getting image source signatures
Copying blob sha256:c65691897a4d140d441e2024ce086de996b1c4620832b90c973db81329577274
Copying blob sha256:641d7cc5cbc48a13c68806cf25d5bcf76ea2157c3181e1db4f5d0edae34954ac
Copying config sha256:11f9dba4d1bc7bbead64adb8fd73ea92dca5fac88a9b5c2c9796abcf2e97846d
Writing manifest to image destination
Storing signatures
STEP 1: FROM registry.access.redhat.com/ubi8/ubi@sha256:8275e2ad7f458e329bdc8c0e7543cff1729998fe515a281d49638246de8e39ee
STEP 2: ENV DOCROOT=/var/www/html
--> 5838d1ce3d4
STEP 3: RUN yum -y install httpd --nodocs && yum clean all -y &&      echo "IT WORKS" > ${DOCROOT}/index.html
time="2022-04-13T06:23:58Z" level=warning msg="Path \"/run/secrets/etc-pki-entitlement\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
time="2022-04-13T06:23:58Z" level=warning msg="Path \"/run/secrets/redhat.repo\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
Updating Subscription Management repositories.
Unable to read consumer identity
Subscription Manager is operating in container mode.
This system is not registered to Red Hat Subscription Management. You can use subscription-manager to register.
Red Hat Universal Base Image 8 (RPMs) - AppStre 1.3 MB/s | 2.6 MB     00:02    
Red Hat Universal Base Image 8 (RPMs) - BaseOS  386 kB/s | 798 kB     00:02    
Dependencies resolved.
================================================================================
 Package            Arch   Version                        Repository       Size
================================================================================
Installing:
 httpd              x86_64 2.4.37-43.module+el8.5.0+14530+6f259f31.3
                                                          ubi-8-appstream 1.4 M
Installing dependencies:
 mod_http2          x86_64 1.15.7-3.module+el8.4.0+8625+d397f3da
                                                          ubi-8-appstream 154 k
 apr-util           x86_64 1.6.1-6.el8                    ubi-8-appstream 105 k
 apr                x86_64 1.6.3-12.el8                   ubi-8-appstream 130 k
 httpd-filesystem   noarch 2.4.37-43.module+el8.5.0+14530+6f259f31.3
                                                          ubi-8-appstream  40 k
 httpd-tools        x86_64 2.4.37-43.module+el8.5.0+14530+6f259f31.3
                                                          ubi-8-appstream 107 k
 redhat-logos-httpd noarch 84.5-1.el8                     ubi-8-baseos     29 k
 mailcap            noarch 2.1.48-3.el8                   ubi-8-baseos     39 k
Installing weak dependencies:
 apr-util-openssl   x86_64 1.6.1-6.el8                    ubi-8-appstream  27 k
 apr-util-bdb       x86_64 1.6.1-6.el8                    ubi-8-appstream  25 k
Enabling module streams:
 httpd                     2.4                                                 

Transaction Summary
================================================================================
Install  10 Packages

Total download size: 2.0 M
Installed size: 5.5 M
Downloading Packages:
(1/10): apr-util-openssl-1.6.1-6.el8.x86_64.rpm 545 kB/s |  27 kB     00:00    
(2/10): apr-util-1.6.1-6.el8.x86_64.rpm         2.0 MB/s | 105 kB     00:00    
(3/10): mod_http2-1.15.7-3.module+el8.4.0+8625+ 2.7 MB/s | 154 kB     00:00    
(4/10): apr-util-bdb-1.6.1-6.el8.x86_64.rpm     3.5 MB/s |  25 kB     00:00    
(5/10): apr-1.6.3-12.el8.x86_64.rpm              16 MB/s | 130 kB     00:00    
(6/10): httpd-filesystem-2.4.37-43.module+el8.5 7.2 MB/s |  40 kB     00:00    
(7/10): httpd-tools-2.4.37-43.module+el8.5.0+14  17 MB/s | 107 kB     00:00    
(8/10): mailcap-2.1.48-3.el8.noarch.rpm         9.5 MB/s |  39 kB     00:00    
(9/10): redhat-logos-httpd-84.5-1.el8.noarch.rp 2.8 MB/s |  29 kB     00:00    
(10/10): httpd-2.4.37-43.module+el8.5.0+14530+6  51 MB/s | 1.4 MB     00:00    
--------------------------------------------------------------------------------
Total                                            22 MB/s | 2.0 MB     00:00     
Running transaction check
Transaction check succeeded.
Running transaction test
Transaction test succeeded.
Running transaction
  Preparing        :                                                        1/1 
  Installing       : apr-1.6.3-12.el8.x86_64                               1/10 
  Running scriptlet: apr-1.6.3-12.el8.x86_64                               1/10 
  Installing       : apr-util-openssl-1.6.1-6.el8.x86_64                   2/10 
  Installing       : apr-util-bdb-1.6.1-6.el8.x86_64                       3/10 
  Installing       : apr-util-1.6.1-6.el8.x86_64                           4/10 
  Running scriptlet: apr-util-1.6.1-6.el8.x86_64                           4/10 
  Installing       : httpd-tools-2.4.37-43.module+el8.5.0+14530+6f259f3    5/10 
  Installing       : mailcap-2.1.48-3.el8.noarch                           6/10 
  Installing       : redhat-logos-httpd-84.5-1.el8.noarch                  7/10 
  Running scriptlet: httpd-filesystem-2.4.37-43.module+el8.5.0+14530+6f    8/10 
  Installing       : httpd-filesystem-2.4.37-43.module+el8.5.0+14530+6f    8/10 
  Installing       : httpd-2.4.37-43.module+el8.5.0+14530+6f259f31.3.x8    9/10 
  Running scriptlet: httpd-2.4.37-43.module+el8.5.0+14530+6f259f31.3.x8    9/10 
  Installing       : mod_http2-1.15.7-3.module+el8.4.0+8625+d397f3da.x8   10/10 
  Running scriptlet: httpd-2.4.37-43.module+el8.5.0+14530+6f259f31.3.x8   10/10 
  Running scriptlet: mod_http2-1.15.7-3.module+el8.4.0+8625+d397f3da.x8   10/10 
  Verifying        : mod_http2-1.15.7-3.module+el8.4.0+8625+d397f3da.x8    1/10 
  Verifying        : apr-util-1.6.1-6.el8.x86_64                           2/10 
  Verifying        : apr-util-openssl-1.6.1-6.el8.x86_64                   3/10 
  Verifying        : apr-util-bdb-1.6.1-6.el8.x86_64                       4/10 
  Verifying        : apr-1.6.3-12.el8.x86_64                               5/10 
  Verifying        : httpd-filesystem-2.4.37-43.module+el8.5.0+14530+6f    6/10 
  Verifying        : httpd-2.4.37-43.module+el8.5.0+14530+6f259f31.3.x8    7/10 
  Verifying        : httpd-tools-2.4.37-43.module+el8.5.0+14530+6f259f3    8/10 
  Verifying        : redhat-logos-httpd-84.5-1.el8.noarch                  9/10 
  Verifying        : mailcap-2.1.48-3.el8.noarch                          10/10 
Installed products updated.

Installed:
  httpd-2.4.37-43.module+el8.5.0+14530+6f259f31.3.x86_64                        
  apr-util-openssl-1.6.1-6.el8.x86_64                                           
  apr-util-bdb-1.6.1-6.el8.x86_64                                               
  mod_http2-1.15.7-3.module+el8.4.0+8625+d397f3da.x86_64                        
  apr-util-1.6.1-6.el8.x86_64                                                   
  apr-1.6.3-12.el8.x86_64                                                       
  httpd-filesystem-2.4.37-43.module+el8.5.0+14530+6f259f31.3.noarch             
  httpd-tools-2.4.37-43.module+el8.5.0+14530+6f259f31.3.x86_64                  
  redhat-logos-httpd-84.5-1.el8.noarch                                          
  mailcap-2.1.48-3.el8.noarch                                                   

Complete!
Updating Subscription Management repositories.
Unable to read consumer identity
Subscription Manager is operating in container mode.
This system is not registered to Red Hat Subscription Management. You can use subscription-manager to register.
16 files removed
--> 15ef7051113
STEP 4: EXPOSE 80
--> a3546c39f8a
STEP 5: RUN rm -rf /run/httpd && mkdir /run/httpd
time="2022-04-13T06:24:08Z" level=warning msg="Path \"/run/secrets/etc-pki-entitlement\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
time="2022-04-13T06:24:08Z" level=warning msg="Path \"/run/secrets/redhat.repo\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
--> a84e3603bdf
STEP 6: USER root
--> 80fb6444e1e
STEP 7: CMD /usr/sbin/httpd -DFOREGROUND
--> e4e8f92755f
STEP 8: ENV "OPENSHIFT_BUILD_NAME"="ch2dockerfile-1" "OPENSHIFT_BUILD_NAMESPACE"="vkndeo-project-docker-strategy" "OPENSHIFT_BUILD_SOURCE"="https://github.com/sanjurajrh/ch2dockerfile" "OPENSHIFT_BUILD_COMMIT"="4f5cea58932bcacad8c89028753e3f503eb120b9"
--> 22e0f5126f5
STEP 9: LABEL "io.openshift.build.commit.author"="sanjurajrh \u003c84304865+sanjurajrh@users.noreply.github.com\u003e" "io.openshift.build.commit.date"="Wed Aug 25 14:18:23 2021 +0530" "io.openshift.build.commit.id"="4f5cea58932bcacad8c89028753e3f503eb120b9" "io.openshift.build.commit.message"="Update Dockerfile" "io.openshift.build.commit.ref"="main" "io.openshift.build.name"="ch2dockerfile-1" "io.openshift.build.namespace"="vkndeo-project-docker-strategy" "io.openshift.build.source-location"="https://github.com/sanjurajrh/ch2dockerfile"
STEP 10: COMMIT temp.builder.openshift.io/vkndeo-project-docker-strategy/ch2dockerfile-1:9d9bdd9d
--> 19805b951bb
19805b951bb5d9c3b67b73122e56f285500fa0dfe4aff06a935d89aeea80df6a

Pushing image image-registry.openshift-image-registry.svc:5000/vkndeo-project-docker-strategy/ch2dockerfile:latest ...
Getting image source signatures
Copying blob sha256:a2a0ecb5aeaa9c80778ed33c87fd0b63e0536050514b6d2ae71612e810af0999
Copying blob sha256:01fbfc716644dd9237b20062f6787989187dcf2ff5634aa5712e381eb863de99
Copying blob sha256:641d7cc5cbc48a13c68806cf25d5bcf76ea2157c3181e1db4f5d0edae34954ac
Copying blob sha256:c65691897a4d140d441e2024ce086de996b1c4620832b90c973db81329577274
Copying config sha256:19805b951bb5d9c3b67b73122e56f285500fa0dfe4aff06a935d89aeea80df6a
Writing manifest to image destination
Storing signatures
Successfully pushed image-registry.openshift-image-registry.svc:5000/vkndeo-project-docker-strategy/ch2dockerfile@sha256:514f6f8b33a590bec9eb5a22f97c73debf65e868577c015e97b00d16a9e7f03e
Push successful
[student@workstation ~]$ oc get pods 
NAME                             READY   STATUS              RESTARTS   AGE
ch2dockerfile-1-build            0/1     Completed           0          47s
ch2dockerfile-84579b49d4-2rn74   0/1     ContainerCreating   0          7s
[student@workstation ~]$ oc get pods 
NAME                             READY   STATUS              RESTARTS   AGE
ch2dockerfile-1-build            0/1     Completed           0          57s
ch2dockerfile-84579b49d4-2rn74   0/1     ContainerCreating   0          17s
[student@workstation ~]$ oc get pods 
NAME                             READY   STATUS              RESTARTS   AGE
ch2dockerfile-1-build            0/1     Completed           0          65s
ch2dockerfile-84579b49d4-2rn74   0/1     ContainerCreating   0          25s
[student@workstation ~]$ oc get pods 
NAME                             READY   STATUS              RESTARTS   AGE
ch2dockerfile-1-build            0/1     Completed           0          74s
ch2dockerfile-84579b49d4-2rn74   0/1     ContainerCreating   0          34s
[student@workstation ~]$ oc get pods 
NAME                             READY   STATUS              RESTARTS   AGE
ch2dockerfile-1-build            0/1     Completed           0          88s
ch2dockerfile-84579b49d4-2rn74   0/1     ContainerCreating   0          48s
[student@workstation ~]$ oc get bc
NAME            TYPE     FROM   LATEST
ch2dockerfile   Docker   Git    1
[student@workstation ~]$ oc get build
NAME              TYPE     FROM          STATUS     STARTED              DURATION
ch2dockerfile-1   Docker   Git@4f5cea5   Complete   About a minute ago   40s
[student@workstation ~]$ 
[student@workstation ~]$ 
[student@workstation ~]$ 
[student@workstation ~]$ oc get pods 
NAME                             READY   STATUS              RESTARTS   AGE
ch2dockerfile-1-build            0/1     Completed           0          2m9s
ch2dockerfile-84579b49d4-2rn74   0/1     ContainerCreating   0          89s
[student@workstation ~]$ oc get pods 
NAME                             READY   STATUS              RESTARTS   AGE
ch2dockerfile-1-build            0/1     Completed           0          2m23s
ch2dockerfile-84579b49d4-2rn74   0/1     ContainerCreating   0          103s
[student@workstation ~]$ oc --help 
OpenShift Client

This client helps you develop, build, deploy, and run your applications on any
OpenShift or Kubernetes cluster. It also includes the administrative
commands for managing a cluster under the 'adm' subcommand.

Usage:
  oc [flags]

Basic Commands:
  login           Log in to a server
  new-project     Request a new project
  new-app         Create a new application
  status          Show an overview of the current project
  project         Switch to another project
  projects        Display existing projects
  explain         Documentation of resources

Build and Deploy Commands:
  rollout         Manage a Kubernetes deployment or OpenShift deployment config
  rollback        Revert part of an application back to a previous deployment
  new-build       Create a new build configuration
  start-build     Start a new build
  cancel-build    Cancel running, pending, or new builds
  import-image    Imports images from a container image registry
  tag             Tag existing images into image streams

Application Management Commands:
  create          Create a resource from a file or from stdin.
  apply           Apply a configuration to a resource by filename or stdin
  get             Display one or many resources
  describe        Show details of a specific resource or group of resources
  edit            Edit a resource on the server
  set             Commands that help set specific features on objects
  label           Update the labels on a resource
  annotate        Update the annotations on a resource
  expose          Expose a replicated application as a service or route
  delete          Delete resources by filenames, stdin, resources and names, or by resources and label selector
  scale           Set a new size for a Deployment, ReplicaSet or Replication Controller
  autoscale       Autoscale a deployment config, deployment, replica set, stateful set, or replication controller
  secrets         Manage secrets
  serviceaccounts Manage service accounts in your project

Troubleshooting and Debugging Commands:
  logs            Print the logs for a container in a pod
  rsh             Start a shell session in a container.
  rsync           Copy files between local filesystem and a pod
  port-forward    Forward one or more local ports to a pod
  debug           Launch a new instance of a pod for debugging
  exec            Execute a command in a container
  proxy           Run a proxy to the Kubernetes API server
  attach          Attach to a running container
  run             Run a particular image on the cluster
  cp              Copy files and directories to and from containers.
  wait            Experimental: Wait for a specific condition on one or many resources.

Advanced Commands:
  adm             Tools for managing a cluster
  replace         Replace a resource by filename or stdin
  patch           Update field(s) of a resource using strategic merge patch
  process         Process a template into list of resources
  extract         Extract secrets or config maps to disk
  observe         Observe changes to resources and react to them (experimental)
  policy          Manage authorization policy
  auth            Inspect authorization
  convert         Convert config files between different API versions
  image           Useful commands for managing images
  registry        Commands for working with the registry
  idle            Idle scalable resources
  api-versions    Print the supported API versions on the server, in the form of "group/version"
  api-resources   Print the supported API resources on the server
  cluster-info    Display cluster info
  diff            Diff live version against would-be applied version
  kustomize       Build a kustomization target from a directory or a remote url.

Settings Commands:
  logout          End the current server session
  config          Modify kubeconfig files
  whoami          Return information about the current session
  completion      Output shell completion code for the specified shell (bash or zsh)

Other Commands:
  ex              Experimental commands under active development
  help            Help about any command
  plugin          Provides utilities for interacting with plugins.
  version         Print the client and server version information

Use "oc <command> --help" for more information about a given command.
Use "oc options" for a list of global command-line options (applies to all commands).
[student@workstation ~]$ 
[student@workstation ~]$ oc get all
NAME                                 READY   STATUS             RESTARTS   AGE
pod/ch2dockerfile-1-build            0/1     Completed          0          8m58s
pod/ch2dockerfile-84579b49d4-2rn74   0/1     CrashLoopBackOff   6          8m18s

NAME                    TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)   AGE
service/ch2dockerfile   ClusterIP   172.30.196.19   <none>        80/TCP    9m1s

NAME                            READY   UP-TO-DATE   AVAILABLE   AGE
deployment.apps/ch2dockerfile   0/1     1            0           9m1s

NAME                                       DESIRED   CURRENT   READY   AGE
replicaset.apps/ch2dockerfile-59c69654f    1         0         0       9m1s
replicaset.apps/ch2dockerfile-84579b49d4   1         1         0       8m19s

NAME                                           TYPE     FROM   LATEST
buildconfig.build.openshift.io/ch2dockerfile   Docker   Git    1

NAME                                       TYPE     FROM          STATUS     STARTED         DURATION
build.build.openshift.io/ch2dockerfile-1   Docker   Git@4f5cea5   Complete   8 minutes ago   40s

NAME                                           IMAGE REPOSITORY                                                                                                     TAGS     UPDATED
imagestream.image.openshift.io/ch2dockerfile   default-route-openshift-image-registry.apps.ap46a.prod.ole.redhat.com/vkndeo-project-docker-strategy/ch2dockerfile   latest   8 minutes ago
imagestream.image.openshift.io/ubi             default-route-openshift-image-registry.apps.ap46a.prod.ole.redhat.com/vkndeo-project-docker-strategy/ubi             8.0      8 minutes ago
[student@workstation ~]$ oc logs buildconfig.build.openshift.io/ch2dockerfile
Cloning "https://github.com/sanjurajrh/ch2dockerfile" ...
	Commit:	4f5cea58932bcacad8c89028753e3f503eb120b9 (Update Dockerfile)
	Author:	sanjurajrh <84304865+sanjurajrh@users.noreply.github.com>
	Date:	Wed Aug 25 14:18:23 2021 +0530
Replaced Dockerfile FROM image registry.access.redhat.com/ubi8/ubi:8.0
Caching blobs under "/var/cache/blobs".

Pulling image registry.access.redhat.com/ubi8/ubi@sha256:8275e2ad7f458e329bdc8c0e7543cff1729998fe515a281d49638246de8e39ee ...
Getting image source signatures
Copying blob sha256:c65691897a4d140d441e2024ce086de996b1c4620832b90c973db81329577274
Copying blob sha256:641d7cc5cbc48a13c68806cf25d5bcf76ea2157c3181e1db4f5d0edae34954ac
Copying config sha256:11f9dba4d1bc7bbead64adb8fd73ea92dca5fac88a9b5c2c9796abcf2e97846d
Writing manifest to image destination
Storing signatures
STEP 1: FROM registry.access.redhat.com/ubi8/ubi@sha256:8275e2ad7f458e329bdc8c0e7543cff1729998fe515a281d49638246de8e39ee
STEP 2: ENV DOCROOT=/var/www/html
--> 5838d1ce3d4
STEP 3: RUN yum -y install httpd --nodocs && yum clean all -y &&      echo "IT WORKS" > ${DOCROOT}/index.html
time="2022-04-13T06:23:58Z" level=warning msg="Path \"/run/secrets/etc-pki-entitlement\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
time="2022-04-13T06:23:58Z" level=warning msg="Path \"/run/secrets/redhat.repo\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
Updating Subscription Management repositories.
Unable to read consumer identity
Subscription Manager is operating in container mode.
This system is not registered to Red Hat Subscription Management. You can use subscription-manager to register.
Red Hat Universal Base Image 8 (RPMs) - AppStre 1.3 MB/s | 2.6 MB     00:02    
Red Hat Universal Base Image 8 (RPMs) - BaseOS  386 kB/s | 798 kB     00:02    
Dependencies resolved.
================================================================================
 Package            Arch   Version                        Repository       Size
================================================================================
Installing:
 httpd              x86_64 2.4.37-43.module+el8.5.0+14530+6f259f31.3
                                                          ubi-8-appstream 1.4 M
Installing dependencies:
 mod_http2          x86_64 1.15.7-3.module+el8.4.0+8625+d397f3da
                                                          ubi-8-appstream 154 k
 apr-util           x86_64 1.6.1-6.el8                    ubi-8-appstream 105 k
 apr                x86_64 1.6.3-12.el8                   ubi-8-appstream 130 k
 httpd-filesystem   noarch 2.4.37-43.module+el8.5.0+14530+6f259f31.3
                                                          ubi-8-appstream  40 k
 httpd-tools        x86_64 2.4.37-43.module+el8.5.0+14530+6f259f31.3
                                                          ubi-8-appstream 107 k
 redhat-logos-httpd noarch 84.5-1.el8                     ubi-8-baseos     29 k
 mailcap            noarch 2.1.48-3.el8                   ubi-8-baseos     39 k
Installing weak dependencies:
 apr-util-openssl   x86_64 1.6.1-6.el8                    ubi-8-appstream  27 k
 apr-util-bdb       x86_64 1.6.1-6.el8                    ubi-8-appstream  25 k
Enabling module streams:
 httpd                     2.4                                                 

Transaction Summary
================================================================================
Install  10 Packages

Total download size: 2.0 M
Installed size: 5.5 M
Downloading Packages:
(1/10): apr-util-openssl-1.6.1-6.el8.x86_64.rpm 545 kB/s |  27 kB     00:00    
(2/10): apr-util-1.6.1-6.el8.x86_64.rpm         2.0 MB/s | 105 kB     00:00    
(3/10): mod_http2-1.15.7-3.module+el8.4.0+8625+ 2.7 MB/s | 154 kB     00:00    
(4/10): apr-util-bdb-1.6.1-6.el8.x86_64.rpm     3.5 MB/s |  25 kB     00:00    
(5/10): apr-1.6.3-12.el8.x86_64.rpm              16 MB/s | 130 kB     00:00    
(6/10): httpd-filesystem-2.4.37-43.module+el8.5 7.2 MB/s |  40 kB     00:00    
(7/10): httpd-tools-2.4.37-43.module+el8.5.0+14  17 MB/s | 107 kB     00:00    
(8/10): mailcap-2.1.48-3.el8.noarch.rpm         9.5 MB/s |  39 kB     00:00    
(9/10): redhat-logos-httpd-84.5-1.el8.noarch.rp 2.8 MB/s |  29 kB     00:00    
(10/10): httpd-2.4.37-43.module+el8.5.0+14530+6  51 MB/s | 1.4 MB     00:00    
--------------------------------------------------------------------------------
Total                                            22 MB/s | 2.0 MB     00:00     
Running transaction check
Transaction check succeeded.
Running transaction test
Transaction test succeeded.
Running transaction
  Preparing        :                                                        1/1 
  Installing       : apr-1.6.3-12.el8.x86_64                               1/10 
  Running scriptlet: apr-1.6.3-12.el8.x86_64                               1/10 
  Installing       : apr-util-openssl-1.6.1-6.el8.x86_64                   2/10 
  Installing       : apr-util-bdb-1.6.1-6.el8.x86_64                       3/10 
  Installing       : apr-util-1.6.1-6.el8.x86_64                           4/10 
  Running scriptlet: apr-util-1.6.1-6.el8.x86_64                           4/10 
  Installing       : httpd-tools-2.4.37-43.module+el8.5.0+14530+6f259f3    5/10 
  Installing       : mailcap-2.1.48-3.el8.noarch                           6/10 
  Installing       : redhat-logos-httpd-84.5-1.el8.noarch                  7/10 
  Running scriptlet: httpd-filesystem-2.4.37-43.module+el8.5.0+14530+6f    8/10 
  Installing       : httpd-filesystem-2.4.37-43.module+el8.5.0+14530+6f    8/10 
  Installing       : httpd-2.4.37-43.module+el8.5.0+14530+6f259f31.3.x8    9/10 
  Running scriptlet: httpd-2.4.37-43.module+el8.5.0+14530+6f259f31.3.x8    9/10 
  Installing       : mod_http2-1.15.7-3.module+el8.4.0+8625+d397f3da.x8   10/10 
  Running scriptlet: httpd-2.4.37-43.module+el8.5.0+14530+6f259f31.3.x8   10/10 
  Running scriptlet: mod_http2-1.15.7-3.module+el8.4.0+8625+d397f3da.x8   10/10 
  Verifying        : mod_http2-1.15.7-3.module+el8.4.0+8625+d397f3da.x8    1/10 
  Verifying        : apr-util-1.6.1-6.el8.x86_64                           2/10 
  Verifying        : apr-util-openssl-1.6.1-6.el8.x86_64                   3/10 
  Verifying        : apr-util-bdb-1.6.1-6.el8.x86_64                       4/10 
  Verifying        : apr-1.6.3-12.el8.x86_64                               5/10 
  Verifying        : httpd-filesystem-2.4.37-43.module+el8.5.0+14530+6f    6/10 
  Verifying        : httpd-2.4.37-43.module+el8.5.0+14530+6f259f31.3.x8    7/10 
  Verifying        : httpd-tools-2.4.37-43.module+el8.5.0+14530+6f259f3    8/10 
  Verifying        : redhat-logos-httpd-84.5-1.el8.noarch                  9/10 
  Verifying        : mailcap-2.1.48-3.el8.noarch                          10/10 
Installed products updated.

Installed:
  httpd-2.4.37-43.module+el8.5.0+14530+6f259f31.3.x86_64                        
  apr-util-openssl-1.6.1-6.el8.x86_64                                           
  apr-util-bdb-1.6.1-6.el8.x86_64                                               
  mod_http2-1.15.7-3.module+el8.4.0+8625+d397f3da.x86_64                        
  apr-util-1.6.1-6.el8.x86_64                                                   
  apr-1.6.3-12.el8.x86_64                                                       
  httpd-filesystem-2.4.37-43.module+el8.5.0+14530+6f259f31.3.noarch             
  httpd-tools-2.4.37-43.module+el8.5.0+14530+6f259f31.3.x86_64                  
  redhat-logos-httpd-84.5-1.el8.noarch                                          
  mailcap-2.1.48-3.el8.noarch                                                   

Complete!
Updating Subscription Management repositories.
Unable to read consumer identity
Subscription Manager is operating in container mode.
This system is not registered to Red Hat Subscription Management. You can use subscription-manager to register.
16 files removed
--> 15ef7051113
STEP 4: EXPOSE 80
--> a3546c39f8a
STEP 5: RUN rm -rf /run/httpd && mkdir /run/httpd
time="2022-04-13T06:24:08Z" level=warning msg="Path \"/run/secrets/etc-pki-entitlement\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
time="2022-04-13T06:24:08Z" level=warning msg="Path \"/run/secrets/redhat.repo\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
--> a84e3603bdf
STEP 6: USER root
--> 80fb6444e1e
STEP 7: CMD /usr/sbin/httpd -DFOREGROUND
--> e4e8f92755f
STEP 8: ENV "OPENSHIFT_BUILD_NAME"="ch2dockerfile-1" "OPENSHIFT_BUILD_NAMESPACE"="vkndeo-project-docker-strategy" "OPENSHIFT_BUILD_SOURCE"="https://github.com/sanjurajrh/ch2dockerfile" "OPENSHIFT_BUILD_COMMIT"="4f5cea58932bcacad8c89028753e3f503eb120b9"
--> 22e0f5126f5
STEP 9: LABEL "io.openshift.build.commit.author"="sanjurajrh \u003c84304865+sanjurajrh@users.noreply.github.com\u003e" "io.openshift.build.commit.date"="Wed Aug 25 14:18:23 2021 +0530" "io.openshift.build.commit.id"="4f5cea58932bcacad8c89028753e3f503eb120b9" "io.openshift.build.commit.message"="Update Dockerfile" "io.openshift.build.commit.ref"="main" "io.openshift.build.name"="ch2dockerfile-1" "io.openshift.build.namespace"="vkndeo-project-docker-strategy" "io.openshift.build.source-location"="https://github.com/sanjurajrh/ch2dockerfile"
STEP 10: COMMIT temp.builder.openshift.io/vkndeo-project-docker-strategy/ch2dockerfile-1:9d9bdd9d
--> 19805b951bb
19805b951bb5d9c3b67b73122e56f285500fa0dfe4aff06a935d89aeea80df6a

Pushing image image-registry.openshift-image-registry.svc:5000/vkndeo-project-docker-strategy/ch2dockerfile:latest ...
Getting image source signatures
Copying blob sha256:a2a0ecb5aeaa9c80778ed33c87fd0b63e0536050514b6d2ae71612e810af0999
Copying blob sha256:01fbfc716644dd9237b20062f6787989187dcf2ff5634aa5712e381eb863de99
Copying blob sha256:641d7cc5cbc48a13c68806cf25d5bcf76ea2157c3181e1db4f5d0edae34954ac
Copying blob sha256:c65691897a4d140d441e2024ce086de996b1c4620832b90c973db81329577274
Copying config sha256:19805b951bb5d9c3b67b73122e56f285500fa0dfe4aff06a935d89aeea80df6a
Writing manifest to image destination
Storing signatures
Successfully pushed image-registry.openshift-image-registry.svc:5000/vkndeo-project-docker-strategy/ch2dockerfile@sha256:514f6f8b33a590bec9eb5a22f97c73debf65e868577c015e97b00d16a9e7f03e
Push successful
[student@workstation ~]$ oc logs build.build.openshift.io/ch2dockerfile-1
Cloning "https://github.com/sanjurajrh/ch2dockerfile" ...
	Commit:	4f5cea58932bcacad8c89028753e3f503eb120b9 (Update Dockerfile)
	Author:	sanjurajrh <84304865+sanjurajrh@users.noreply.github.com>
	Date:	Wed Aug 25 14:18:23 2021 +0530
Replaced Dockerfile FROM image registry.access.redhat.com/ubi8/ubi:8.0
Caching blobs under "/var/cache/blobs".

Pulling image registry.access.redhat.com/ubi8/ubi@sha256:8275e2ad7f458e329bdc8c0e7543cff1729998fe515a281d49638246de8e39ee ...
Getting image source signatures
Copying blob sha256:c65691897a4d140d441e2024ce086de996b1c4620832b90c973db81329577274
Copying blob sha256:641d7cc5cbc48a13c68806cf25d5bcf76ea2157c3181e1db4f5d0edae34954ac
Copying config sha256:11f9dba4d1bc7bbead64adb8fd73ea92dca5fac88a9b5c2c9796abcf2e97846d
Writing manifest to image destination
Storing signatures
STEP 1: FROM registry.access.redhat.com/ubi8/ubi@sha256:8275e2ad7f458e329bdc8c0e7543cff1729998fe515a281d49638246de8e39ee
STEP 2: ENV DOCROOT=/var/www/html
--> 5838d1ce3d4
STEP 3: RUN yum -y install httpd --nodocs && yum clean all -y &&      echo "IT WORKS" > ${DOCROOT}/index.html
time="2022-04-13T06:23:58Z" level=warning msg="Path \"/run/secrets/etc-pki-entitlement\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
time="2022-04-13T06:23:58Z" level=warning msg="Path \"/run/secrets/redhat.repo\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
Updating Subscription Management repositories.
Unable to read consumer identity
Subscription Manager is operating in container mode.
This system is not registered to Red Hat Subscription Management. You can use subscription-manager to register.
Red Hat Universal Base Image 8 (RPMs) - AppStre 1.3 MB/s | 2.6 MB     00:02    
Red Hat Universal Base Image 8 (RPMs) - BaseOS  386 kB/s | 798 kB     00:02    
Dependencies resolved.
================================================================================
 Package            Arch   Version                        Repository       Size
================================================================================
Installing:
 httpd              x86_64 2.4.37-43.module+el8.5.0+14530+6f259f31.3
                                                          ubi-8-appstream 1.4 M
Installing dependencies:
 mod_http2          x86_64 1.15.7-3.module+el8.4.0+8625+d397f3da
                                                          ubi-8-appstream 154 k
 apr-util           x86_64 1.6.1-6.el8                    ubi-8-appstream 105 k
 apr                x86_64 1.6.3-12.el8                   ubi-8-appstream 130 k
 httpd-filesystem   noarch 2.4.37-43.module+el8.5.0+14530+6f259f31.3
                                                          ubi-8-appstream  40 k
 httpd-tools        x86_64 2.4.37-43.module+el8.5.0+14530+6f259f31.3
                                                          ubi-8-appstream 107 k
 redhat-logos-httpd noarch 84.5-1.el8                     ubi-8-baseos     29 k
 mailcap            noarch 2.1.48-3.el8                   ubi-8-baseos     39 k
Installing weak dependencies:
 apr-util-openssl   x86_64 1.6.1-6.el8                    ubi-8-appstream  27 k
 apr-util-bdb       x86_64 1.6.1-6.el8                    ubi-8-appstream  25 k
Enabling module streams:
 httpd                     2.4                                                 

Transaction Summary
================================================================================
Install  10 Packages

Total download size: 2.0 M
Installed size: 5.5 M
Downloading Packages:
(1/10): apr-util-openssl-1.6.1-6.el8.x86_64.rpm 545 kB/s |  27 kB     00:00    
(2/10): apr-util-1.6.1-6.el8.x86_64.rpm         2.0 MB/s | 105 kB     00:00    
(3/10): mod_http2-1.15.7-3.module+el8.4.0+8625+ 2.7 MB/s | 154 kB     00:00    
(4/10): apr-util-bdb-1.6.1-6.el8.x86_64.rpm     3.5 MB/s |  25 kB     00:00    
(5/10): apr-1.6.3-12.el8.x86_64.rpm              16 MB/s | 130 kB     00:00    
(6/10): httpd-filesystem-2.4.37-43.module+el8.5 7.2 MB/s |  40 kB     00:00    
(7/10): httpd-tools-2.4.37-43.module+el8.5.0+14  17 MB/s | 107 kB     00:00    
(8/10): mailcap-2.1.48-3.el8.noarch.rpm         9.5 MB/s |  39 kB     00:00    
(9/10): redhat-logos-httpd-84.5-1.el8.noarch.rp 2.8 MB/s |  29 kB     00:00    
(10/10): httpd-2.4.37-43.module+el8.5.0+14530+6  51 MB/s | 1.4 MB     00:00    
--------------------------------------------------------------------------------
Total                                            22 MB/s | 2.0 MB     00:00     
Running transaction check
Transaction check succeeded.
Running transaction test
Transaction test succeeded.
Running transaction
  Preparing        :                                                        1/1 
  Installing       : apr-1.6.3-12.el8.x86_64                               1/10 
  Running scriptlet: apr-1.6.3-12.el8.x86_64                               1/10 
  Installing       : apr-util-openssl-1.6.1-6.el8.x86_64                   2/10 
  Installing       : apr-util-bdb-1.6.1-6.el8.x86_64                       3/10 
  Installing       : apr-util-1.6.1-6.el8.x86_64                           4/10 
  Running scriptlet: apr-util-1.6.1-6.el8.x86_64                           4/10 
  Installing       : httpd-tools-2.4.37-43.module+el8.5.0+14530+6f259f3    5/10 
  Installing       : mailcap-2.1.48-3.el8.noarch                           6/10 
  Installing       : redhat-logos-httpd-84.5-1.el8.noarch                  7/10 
  Running scriptlet: httpd-filesystem-2.4.37-43.module+el8.5.0+14530+6f    8/10 
  Installing       : httpd-filesystem-2.4.37-43.module+el8.5.0+14530+6f    8/10 
  Installing       : httpd-2.4.37-43.module+el8.5.0+14530+6f259f31.3.x8    9/10 
  Running scriptlet: httpd-2.4.37-43.module+el8.5.0+14530+6f259f31.3.x8    9/10 
  Installing       : mod_http2-1.15.7-3.module+el8.4.0+8625+d397f3da.x8   10/10 
  Running scriptlet: httpd-2.4.37-43.module+el8.5.0+14530+6f259f31.3.x8   10/10 
  Running scriptlet: mod_http2-1.15.7-3.module+el8.4.0+8625+d397f3da.x8   10/10 
  Verifying        : mod_http2-1.15.7-3.module+el8.4.0+8625+d397f3da.x8    1/10 
  Verifying        : apr-util-1.6.1-6.el8.x86_64                           2/10 
  Verifying        : apr-util-openssl-1.6.1-6.el8.x86_64                   3/10 
  Verifying        : apr-util-bdb-1.6.1-6.el8.x86_64                       4/10 
  Verifying        : apr-1.6.3-12.el8.x86_64                               5/10 
  Verifying        : httpd-filesystem-2.4.37-43.module+el8.5.0+14530+6f    6/10 
  Verifying        : httpd-2.4.37-43.module+el8.5.0+14530+6f259f31.3.x8    7/10 
  Verifying        : httpd-tools-2.4.37-43.module+el8.5.0+14530+6f259f3    8/10 
  Verifying        : redhat-logos-httpd-84.5-1.el8.noarch                  9/10 
  Verifying        : mailcap-2.1.48-3.el8.noarch                          10/10 
Installed products updated.

Installed:
  httpd-2.4.37-43.module+el8.5.0+14530+6f259f31.3.x86_64                        
  apr-util-openssl-1.6.1-6.el8.x86_64                                           
  apr-util-bdb-1.6.1-6.el8.x86_64                                               
  mod_http2-1.15.7-3.module+el8.4.0+8625+d397f3da.x86_64                        
  apr-util-1.6.1-6.el8.x86_64                                                   
  apr-1.6.3-12.el8.x86_64                                                       
  httpd-filesystem-2.4.37-43.module+el8.5.0+14530+6f259f31.3.noarch             
  httpd-tools-2.4.37-43.module+el8.5.0+14530+6f259f31.3.x86_64                  
  redhat-logos-httpd-84.5-1.el8.noarch                                          
  mailcap-2.1.48-3.el8.noarch                                                   

Complete!
Updating Subscription Management repositories.
Unable to read consumer identity
Subscription Manager is operating in container mode.
This system is not registered to Red Hat Subscription Management. You can use subscription-manager to register.
16 files removed
--> 15ef7051113
STEP 4: EXPOSE 80
--> a3546c39f8a
STEP 5: RUN rm -rf /run/httpd && mkdir /run/httpd
time="2022-04-13T06:24:08Z" level=warning msg="Path \"/run/secrets/etc-pki-entitlement\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
time="2022-04-13T06:24:08Z" level=warning msg="Path \"/run/secrets/redhat.repo\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
--> a84e3603bdf
STEP 6: USER root
--> 80fb6444e1e
STEP 7: CMD /usr/sbin/httpd -DFOREGROUND
--> e4e8f92755f
STEP 8: ENV "OPENSHIFT_BUILD_NAME"="ch2dockerfile-1" "OPENSHIFT_BUILD_NAMESPACE"="vkndeo-project-docker-strategy" "OPENSHIFT_BUILD_SOURCE"="https://github.com/sanjurajrh/ch2dockerfile" "OPENSHIFT_BUILD_COMMIT"="4f5cea58932bcacad8c89028753e3f503eb120b9"
--> 22e0f5126f5
STEP 9: LABEL "io.openshift.build.commit.author"="sanjurajrh \u003c84304865+sanjurajrh@users.noreply.github.com\u003e" "io.openshift.build.commit.date"="Wed Aug 25 14:18:23 2021 +0530" "io.openshift.build.commit.id"="4f5cea58932bcacad8c89028753e3f503eb120b9" "io.openshift.build.commit.message"="Update Dockerfile" "io.openshift.build.commit.ref"="main" "io.openshift.build.name"="ch2dockerfile-1" "io.openshift.build.namespace"="vkndeo-project-docker-strategy" "io.openshift.build.source-location"="https://github.com/sanjurajrh/ch2dockerfile"
STEP 10: COMMIT temp.builder.openshift.io/vkndeo-project-docker-strategy/ch2dockerfile-1:9d9bdd9d
--> 19805b951bb
19805b951bb5d9c3b67b73122e56f285500fa0dfe4aff06a935d89aeea80df6a

Pushing image image-registry.openshift-image-registry.svc:5000/vkndeo-project-docker-strategy/ch2dockerfile:latest ...
Getting image source signatures
Copying blob sha256:a2a0ecb5aeaa9c80778ed33c87fd0b63e0536050514b6d2ae71612e810af0999
Copying blob sha256:01fbfc716644dd9237b20062f6787989187dcf2ff5634aa5712e381eb863de99
Copying blob sha256:641d7cc5cbc48a13c68806cf25d5bcf76ea2157c3181e1db4f5d0edae34954ac
Copying blob sha256:c65691897a4d140d441e2024ce086de996b1c4620832b90c973db81329577274
Copying config sha256:19805b951bb5d9c3b67b73122e56f285500fa0dfe4aff06a935d89aeea80df6a
Writing manifest to image destination
Storing signatures
Successfully pushed image-registry.openshift-image-registry.svc:5000/vkndeo-project-docker-strategy/ch2dockerfile@sha256:514f6f8b33a590bec9eb5a22f97c73debf65e868577c015e97b00d16a9e7f03e
Push successful
[student@workstation ~]$ oc get build
NAME              TYPE     FROM          STATUS     STARTED          DURATION
ch2dockerfile-1   Docker   Git@4f5cea5   Complete   10 minutes ago   40s
[student@workstation ~]$ 
[student@workstation ~]$ 
[student@workstation ~]$ oc projects
You have access to the following projects and can switch between them with ' project <projectname>':

    vkndeo-helm
  * vkndeo-project-docker-strategy
    vkndeo-project-kustomize
    vkndeo-project-php-s2i
    vkndeo-project-s2i
    vkndeo-project1-oci

Using project "vkndeo-project-docker-strategy" on server "https://api.ap46a.prod.ole.redhat.com:6443".
[student@workstation ~]$ oc project vkndeo-project-php-s2i
Now using project "vkndeo-project-php-s2i" on server "https://api.ap46a.prod.ole.redhat.com:6443".
[student@workstation ~]$ oc get build
NAME         TYPE     FROM          STATUS                       STARTED             DURATION
phpmyapp-1   Source   Git@85ad78f   Complete                     About an hour ago   54s
phpmyapp-2   Source   Git@5cb9a11   Cancelled (CancelledBuild)   46 minutes ago      39s
phpmyapp-3   Source   Git@5cb9a11   Complete                     44 minutes ago      48s
phpmyapp-4   Source   Git@81ab721   Complete                     41 minutes ago      47s
phpmyapp-5   Source   Git@81ab721   Complete                     33 minutes ago      53s
[student@workstation ~]$ 
[student@workstation ~]$ 
[student@workstation ~]$ 
[student@workstation ~]$ oc get bc 
NAME       TYPE     FROM   LATEST
phpmyapp   Source   Git    5
[student@workstation ~]$ grep -i history bc.yaml 
  failedBuildsHistoryLimit: 5
  successfulBuildsHistoryLimit: 5
[student@workstation ~]$ 
[student@workstation ~]$ 
[student@workstation ~]$ 
[student@workstation ~]$ oc adm prune --help 
Remove older versions of resources from the server

 The commands here allow administrators to manage the older versions of resources on the system by removing them.

Usage:
  oc adm prune [flags]

Available Commands:
  auth        Removes references to the specified roles, clusterroles, users, and groups.
  builds      Remove old completed and failed builds
  deployments Remove old completed and failed deployments
  groups      Remove old OpenShift groups referencing missing records on an external provider
  images      Remove unreferenced images

Use "oc adm <command> --help" for more information about a given command.
Use "oc adm options" for a list of global command-line options (applies to all commands).
[student@workstation ~]$ 
[student@workstation ~]$ oc projects
You have access to the following projects and can switch between them with ' project <projectname>':

    vkndeo-helm
    vkndeo-project-docker-strategy
    vkndeo-project-kustomize
  * vkndeo-project-php-s2i
    vkndeo-project-s2i
    vkndeo-project1-oci

Using project "vkndeo-project-php-s2i" on server "https://api.ap46a.prod.ole.redhat.com:6443".
[student@workstation ~]$ 
[student@workstation ~]$ 
[student@workstation ~]$ oc new-project vkndeo-project-php-trigger
Now using project "vkndeo-project-php-trigger" on server "https://api.ap46a.prod.ole.redhat.com:6443".

You can add applications to this project with the 'new-app' command. For example, try:

    oc new-app rails-postgresql-example

to build a new example application in Ruby. Or use kubectl to deploy a simple Kubernetes application:

    kubectl create deployment hello-node --image=k8s.gcr.io/serve_hostname

[student@workstation ~]$ oc whoami  
vkndeo
[student@workstation ~]$ oc whoami  -t 
sha256~3pRm1PJmu02CjHk4rUocjADwYDwmE6RbKlGEJHL_2gk
[student@workstation ~]$ TOKEN=$(oc whoami -t)
[student@workstation ~]$ ls
base     deployment.yaml  DO288       Downloads       Music     php-73-ubi8-newer.tar.gz     pod.yaml        s2i-sample-app              Videos
bc.yaml  Desktop          DO288-apps  get_helm.sh     mychart   php-73-ubi8-original.tar.gz  Public          s2i_steps_for_verification
demo     DO180-apps       Documents   history_12.txt  overlays  Pictures                     s2i-demo-httpd  Templates
[student@workstation ~]$ oc get route -n openshift-image-registry 
NAME            HOST/PORT                                                               PATH   SERVICES         PORT    TERMINATION   WILDCARD
default-route   default-route-openshift-image-registry.apps.ap46a.prod.ole.redhat.com          image-registry   <all>   reencrypt     None
[student@workstation ~]$ skopeo copy --dest-creds=vkndeo:${TOKEN} oci
oci:          oci-archive:  
[student@workstation ~]$ skopeo copy --dest-creds=vkndeo:${TOKEN} oci-archive:php-73-ubi8-original.tar.gz docker://default-route-openshift-image-registry.apps.ap46a.prod.ole.redhat.com/vkndeo-project-php-trigger/php-73-ubi8:latest 
Getting image source signatures
Copying blob ca4d32f962e4 done  
Copying blob 1a1a2275d055 done  
Copying blob 3625e39282d6 done  
Copying blob b8f1751bd039 done  
Copying blob 559f601f59e0 done  
Copying config 54effc79f1 done  
Writing manifest to image destination
Copying config 54effc79f1 [--------------------------------------] 0.0b / 4.5KiB
Writing manifest to image destination
Storing signatures
[student@workstation ~]$ oc get is 
NAME          IMAGE REPOSITORY                                                                                               TAGS     UPDATED
php-73-ubi8   default-route-openshift-image-registry.apps.ap46a.prod.ole.redhat.com/vkndeo-project-php-trigger/php-73-ubi8   latest   6 seconds ago
[student@workstation ~]$ oc describe is 
Name:			php-73-ubi8
Namespace:		vkndeo-project-php-trigger
Created:		18 seconds ago
Labels:			<none>
Annotations:		<none>
Image Repository:	default-route-openshift-image-registry.apps.ap46a.prod.ole.redhat.com/vkndeo-project-php-trigger/php-73-ubi8
Image Lookup:		local=false
Unique Images:		1
Tags:			1

latest
  no spec tag

  * image-registry.openshift-image-registry.svc:5000/vkndeo-project-php-trigger/php-73-ubi8@sha256:48815fc499b3b573e79a0e726d9bee4c8d1e1ad9acc063cbe7896f28f33ad12f
      18 seconds ago
[student@workstation ~]$ oc new-app --name phptriiger php-73-ubi8~https://github.com/sanjurajrh/php-helloworld
--> Found image 54effc7 (12 months old) in image stream "vkndeo-project-php-trigger/php-73-ubi8" under tag "latest" for "php-73-ubi8"

    Apache 2.4 with PHP 7.3 
    ----------------------- 
    PHP 7.3 available as container is a base platform for building and running various PHP 7.3 applications and frameworks. PHP is an HTML-embedded scripting language. PHP attempts to make it easy for developers to write dynamically generated web pages. PHP also offers built-in database integration for several commercial and non-commercial database management systems, so writing a database-enabled webpage with PHP is fairly simple. The most common use of PHP coding is probably as a replacement for CGI scripts.

    Tags: builder, php, php73, php-73

    * A source build using source code from https://github.com/sanjurajrh/php-helloworld will be created
      * The resulting image will be pushed to image stream tag "phptriiger:latest"
      * Use 'oc start-build' to trigger a new build

--> Creating resources ...
    imagestream.image.openshift.io "phptriiger" created
    buildconfig.build.openshift.io "phptriiger" created
    deployment.apps "phptriiger" created
    service "phptriiger" created
--> Success
    Build scheduled, use 'oc logs -f buildconfig/phptriiger' to track its progress.
    Application is not exposed. You can expose services to the outside world by executing one or more of the commands below:
     'oc expose service/phptriiger' 
    Run 'oc status' to view your app.
[student@workstation ~]$ oc logs -f buildconfig/phptriiger
Cloning "https://github.com/sanjurajrh/php-helloworld" ...
	Commit:	81ab721c319d8688a6f6af8a4770650463e249c9 (Update index.php with correct syntax)
	Author:	sanjurajrh <84304865+sanjurajrh@users.noreply.github.com>
	Date:	Wed Apr 13 11:23:33 2022 +0530
Caching blobs under "/var/cache/blobs".
Getting image source signatures
Copying blob sha256:1a1a2275d0557672b42c099ffe43175091d9318f05399897d29911dbbb272ea4
Copying blob sha256:559f601f59e06526a79a5753266b6cfc29c11f0bbd78e40c540b6c5378341f23
Copying blob sha256:3625e39282d6cf2c0bd647edc3d46b44d78182f9b3b6404ed6ee7f62c181a159
Copying blob sha256:b8f1751bd039859ad91c580a96e744c1a8b2d000c650ff11758e4ddd0940e631
Copying blob sha256:ca4d32f962e494ac07eac666330ed3e925014905fc8d170d48428b3fdab6be07
Copying config sha256:54effc79f12d1c71d131167602f1215747376f77f92f5f7d91cc1659ee8e4b49
Writing manifest to image destination
Storing signatures
Generating dockerfile with builder image image-registry.openshift-image-registry.svc:5000/vkndeo-project-php-trigger/php-73-ubi8@sha256:48815fc499b3b573e79a0e726d9bee4c8d1e1ad9acc063cbe7896f28f33ad12f
STEP 1: FROM image-registry.openshift-image-registry.svc:5000/vkndeo-project-php-trigger/php-73-ubi8@sha256:48815fc499b3b573e79a0e726d9bee4c8d1e1ad9acc063cbe7896f28f33ad12f
STEP 2: LABEL "io.openshift.build.commit.message"="Update index.php with correct syntax"       "io.openshift.build.source-location"="https://github.com/sanjurajrh/php-helloworld"       "io.openshift.build.image"="image-registry.openshift-image-registry.svc:5000/vkndeo-project-php-trigger/php-73-ubi8@sha256:48815fc499b3b573e79a0e726d9bee4c8d1e1ad9acc063cbe7896f28f33ad12f"       "io.openshift.build.commit.author"="sanjurajrh <84304865+sanjurajrh@users.noreply.github.com>"       "io.openshift.build.commit.date"="Wed Apr 13 11:23:33 2022 +0530"       "io.openshift.build.commit.id"="81ab721c319d8688a6f6af8a4770650463e249c9"       "io.openshift.build.commit.ref"="main"
STEP 3: ENV OPENSHIFT_BUILD_NAME="phptriiger-1"     OPENSHIFT_BUILD_NAMESPACE="vkndeo-project-php-trigger"     OPENSHIFT_BUILD_SOURCE="https://github.com/sanjurajrh/php-helloworld"     OPENSHIFT_BUILD_COMMIT="81ab721c319d8688a6f6af8a4770650463e249c9"
STEP 4: USER root
STEP 5: COPY upload/src /tmp/src
STEP 6: RUN chown -R 1001:0 /tmp/src
time="2022-04-13T07:02:03Z" level=warning msg="Path \"/run/secrets/etc-pki-entitlement\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
time="2022-04-13T07:02:03Z" level=warning msg="Path \"/run/secrets/redhat.repo\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
STEP 7: USER 1001
STEP 8: RUN /usr/libexec/s2i/assemble
time="2022-04-13T07:02:04Z" level=warning msg="Path \"/run/secrets/etc-pki-entitlement\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
time="2022-04-13T07:02:04Z" level=warning msg="Path \"/run/secrets/redhat.repo\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
---> Installing application source...
=> sourcing 20-copy-config.sh ...
---> 07:02:04     Processing additional arbitrary httpd configuration provided by s2i ...
=> sourcing 00-documentroot.conf ...
=> sourcing 50-mpm-tuning.conf ...
=> sourcing 40-ssl-certs.sh ...
STEP 9: CMD /usr/libexec/s2i/run
STEP 10: COMMIT temp.builder.openshift.io/vkndeo-project-php-trigger/phptriiger-1:77628762
Getting image source signatures
Copying blob sha256:476579af086aee78cb12d88b08fd6b61a80a3f055cae293ec2d15a37dbe7b3f9
Copying blob sha256:1e8cd6732429ccfaea139348807617a5315fd7ca469850423f77f51661e8fe51
Copying blob sha256:4f4f36fb1da5a40f49f28511e708b7d4c47e351735053907847992829943e077
Copying blob sha256:c87487652906a86e96f34d10110c62ded50dac23c035ac4ddc250af679d8cfe9
Copying blob sha256:3693459e6aaf9c0e9e65bc5b749d864f6d33cd0007f669de0762465712e30ac4
Copying blob sha256:fc9f78b01c3e3ddd14335cbb955b013472738c2b0f1ca816107a682cc0911724
Copying config sha256:63a251637480058a2687bd87991274fef881141b1855978e68a8b8d0318c5dfd
Writing manifest to image destination
Storing signatures
--> 63a25163748
63a251637480058a2687bd87991274fef881141b1855978e68a8b8d0318c5dfd

Pushing image image-registry.openshift-image-registry.svc:5000/vkndeo-project-php-trigger/phptriiger:latest ...
Getting image source signatures
Copying blob sha256:fc9f78b01c3e3ddd14335cbb955b013472738c2b0f1ca816107a682cc0911724
Copying blob sha256:3625e39282d6cf2c0bd647edc3d46b44d78182f9b3b6404ed6ee7f62c181a159
Copying blob sha256:559f601f59e06526a79a5753266b6cfc29c11f0bbd78e40c540b6c5378341f23
Copying blob sha256:1a1a2275d0557672b42c099ffe43175091d9318f05399897d29911dbbb272ea4
Copying blob sha256:b8f1751bd039859ad91c580a96e744c1a8b2d000c650ff11758e4ddd0940e631
Copying blob sha256:ca4d32f962e494ac07eac666330ed3e925014905fc8d170d48428b3fdab6be07
Copying config sha256:63a251637480058a2687bd87991274fef881141b1855978e68a8b8d0318c5dfd
Writing manifest to image destination
Storing signatures
Successfully pushed image-registry.openshift-image-registry.svc:5000/vkndeo-project-php-trigger/phptriiger@sha256:12dc24036fd893094c2922732340fb8963633915466e10264d7bc948891a14bc
Push successful
[student@workstation ~]$ oc get pods 
NAME                          READY   STATUS      RESTARTS   AGE
phptriiger-1-build            0/1     Completed   0          74s
phptriiger-5db49f6578-zvzk8   1/1     Running     0          16s
[student@workstation ~]$ oc describe bc | grep -i trigger
Namespace:	vkndeo-project-php-trigger
From Image:	ImageStreamTag vkndeo-project-php-trigger/php-73-ubi8:latest
Triggered by:		Config, ImageChange
	URL:	https://api.ap46a.prod.ole.redhat.com:6443/apis/build.openshift.io/v1/namespaces/vkndeo-project-php-trigger/buildconfigs/phptriiger/webhooks/<secret>/github
	URL:		https://api.ap46a.prod.ole.redhat.com:6443/apis/build.openshift.io/v1/namespaces/vkndeo-project-php-trigger/buildconfigs/phptriiger/webhooks/<secret>/generic
  Warning	BuildConfigTriggerFailed	98s	buildconfig-controller	error triggering Build for BuildConfig vkndeo-project-php-trigger/phptriiger: Internal error occurred: build config vkndeo-project-php-trigger/phptriiger has already instantiated a build for imageid image-registry.openshift-image-registry.svc:5000/vkndeo-project-php-trigger/php-73-ubi8@sha256:48815fc499b3b573e79a0e726d9bee4c8d1e1ad9acc063cbe7896f28f33ad12f
[student@workstation ~]$ 
[student@workstation ~]$ 
[student@workstation ~]$ oc get build 
NAME           TYPE     FROM          STATUS     STARTED         DURATION
phptriiger-1   Source   Git@81ab721   Complete   2 minutes ago   59s
[student@workstation ~]$ skopeo copy --dest-creds=vkndeo:${TOKEN} oci-archive: docker://default-route-openshift-image-registry.apps.ap46a.prod.ole[student@workstation ~]$ skopeo copy --dest-creds=vkndeo:${TOKEN} oci-archive:php-73-ubi8-newer.tar.gz docker://default-route-openshift-image-registry.apps.ap46a.prod.ole.redhat.com/vkndeo-project-php-trigger/php-73-ubi8:latest 
Getting image source signatures
Copying blob 3be8687e54a9 done  
Copying blob 2268ee6d0e5a done  
Copying blob 44368d8124cb done  
Copying blob cc326b0b9d4d done  
Copying blob 691a8d1ddde6 done  
Copying config cede483a1e done  
Writing manifest to image destination
Copying config cede483a1e [--------------------------------------] 0.0b / 4.5KiB
Writing manifest to image destination
Storing signatures
[student@workstation ~]$ oc get is 
NAME          IMAGE REPOSITORY                                                                                               TAGS     UPDATED
php-73-ubi8   default-route-openshift-image-registry.apps.ap46a.prod.ole.redhat.com/vkndeo-project-php-trigger/php-73-ubi8   latest   6 seconds ago
phptriiger    default-route-openshift-image-registry.apps.ap46a.prod.ole.redhat.com/vkndeo-project-php-trigger/phptriiger    latest   3 minutes ago
[student@workstation ~]$ oc describe is 
Name:			php-73-ubi8
Namespace:		vkndeo-project-php-trigger
Created:		5 minutes ago
Labels:			<none>
Annotations:		<none>
Image Repository:	default-route-openshift-image-registry.apps.ap46a.prod.ole.redhat.com/vkndeo-project-php-trigger/php-73-ubi8
Image Lookup:		local=false
Unique Images:		2
Tags:			1

latest
  no spec tag

  * image-registry.openshift-image-registry.svc:5000/vkndeo-project-php-trigger/php-73-ubi8@sha256:4009aebbda45063ec8c14d4070b762b658b7eb7fcfaa98f7ed3081931b9a3279
      20 seconds ago
    image-registry.openshift-image-registry.svc:5000/vkndeo-project-php-trigger/php-73-ubi8@sha256:48815fc499b3b573e79a0e726d9bee4c8d1e1ad9acc063cbe7896f28f33ad12f
      5 minutes ago


Name:			phptriiger
Namespace:		vkndeo-project-php-trigger
Created:		4 minutes ago
Labels:			app=phptriiger
			app.kubernetes.io/component=phptriiger
			app.kubernetes.io/instance=phptriiger
Annotations:		openshift.io/generated-by=OpenShiftNewApp
Image Repository:	default-route-openshift-image-registry.apps.ap46a.prod.ole.redhat.com/vkndeo-project-php-trigger/phptriiger
Image Lookup:		local=false
Unique Images:		1
Tags:			1

latest
  no spec tag

  * image-registry.openshift-image-registry.svc:5000/vkndeo-project-php-trigger/phptriiger@sha256:12dc24036fd893094c2922732340fb8963633915466e10264d7bc948891a14bc
      3 minutes ago
[student@workstation ~]$ oc get build 
NAME           TYPE     FROM          STATUS     STARTED          DURATION
phptriiger-1   Source   Git@81ab721   Complete   4 minutes ago    59s
phptriiger-2   Source   Git@81ab721   Running    33 seconds ago   
[student@workstation ~]$ oc get pods 
NAME                          READY   STATUS      RESTARTS   AGE
phptriiger-1-build            0/1     Completed   0          4m45s
phptriiger-2-build            1/1     Running     0          51s
phptriiger-5db49f6578-zvzk8   1/1     Running     0          3m47s
[student@workstation ~]$ oc get pods 
NAME                          READY   STATUS      RESTARTS   AGE
phptriiger-1-build            0/1     Completed   0          5m3s
phptriiger-2-build            0/1     Completed   0          69s
phptriiger-7dd88454bf-w8grh   1/1     Running     0          17s
[student@workstation ~]$ oc describe build phptriiger-2
Name:		phptriiger-2
Namespace:	vkndeo-project-php-trigger
Created:	About a minute ago
Labels:		app=phptriiger
		app.kubernetes.io/component=phptriiger
		app.kubernetes.io/instance=phptriiger
		buildconfig=phptriiger
		openshift.io/build-config.name=phptriiger
		openshift.io/build.start-policy=Serial
Annotations:	openshift.io/build-config.name=phptriiger
		openshift.io/build.number=2
		openshift.io/build.pod-name=phptriiger-2-build

Status:		Complete
Started:	Wed, 13 Apr 2022 03:05:09 EDT
Duration:	52s
  FetchInputs:	  1s
  PullImages:	  33s
  Build:	  10s
  PushImage:	  3s

Build Config:	phptriiger
Build Pod:	phptriiger-2-build
Image Digest:	sha256:03717db24c80462f169579825827e2ffb93ff6f90b3cd1b2bb2a94bf52e722de

Strategy:		Source
URL:			https://github.com/sanjurajrh/php-helloworld
Commit:			81ab721 (Update index.php with correct syntax)
Author/Committer:	sanjurajrh / GitHub
From Image:		DockerImage image-registry.openshift-image-registry.svc:5000/vkndeo-project-php-trigger/php-73-ubi8@sha256:4009aebbda45063ec8c14d4070b762b658b7eb7fcfaa98f7ed3081931b9a3279
Pull Secret Name:	builder-dockercfg-w92cr
Output to:		ImageStreamTag phptriiger:latest
Push Secret:		builder-dockercfg-w92cr

Build trigger cause:	Image change
Image ID:		image-registry.openshift-image-registry.svc:5000/vkndeo-project-php-trigger/php-73-ubi8@sha256:4009aebbda45063ec8c14d4070b762b658b7eb7fcfaa98f7ed3081931b9a3279
Image Name/Kind:	php-73-ubi8:latest / ImageStreamTag

Events:
  Type		Reason		Age	From			Message
  ----		------		----	----			-------
  Normal	Scheduled	97s	default-scheduler	Successfully assigned vkndeo-project-php-trigger/phptriiger-2-build to ip-10-0-193-166.ap-southeast-1.compute.internal
  Normal	Created		95s	kubelet			Created container git-clone
  Normal	Started		95s	kubelet			Started container git-clone
  Normal	AddedInterface	95s	multus			Add eth0 [10.131.3.149/23]
  Normal	Pulled		95s	kubelet			Container image "quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:17d408aaf7b8a00c66895a1e50b3c8529be76a342cfa84c478fa2af72576f67f" already present on machine
  Normal	BuildStarted	94s	build-controller	Build vkndeo-project-php-trigger/phptriiger-2 is now running
  Normal	Pulled		93s	kubelet			Container image "quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:17d408aaf7b8a00c66895a1e50b3c8529be76a342cfa84c478fa2af72576f67f" already present on machine
  Normal	Created		93s	kubelet			Created container manage-dockerfile
  Normal	Started		93s	kubelet			Started container manage-dockerfile
  Normal	Started		92s	kubelet			Started container sti-build
  Normal	Pulled		92s	kubelet			Container image "quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:17d408aaf7b8a00c66895a1e50b3c8529be76a342cfa84c478fa2af72576f67f" already present on machine
  Normal	Created		92s	kubelet			Created container sti-build
  Normal	BuildCompleted	45s	build-controller	Build vkndeo-project-php-trigger/phptriiger-2 completed successfully
[student@workstation ~]$ oc set triggers -h 
[student@workstation ~]$ oc set triggers -h 
Set or remove triggers

 Build configs, deployment configs, and most Kubernetes workload objects may have a set of triggers that result in a new
deployment or build being created when an image changes. This command enables you to alter those triggers - making them
automatic or manual, adding new entries, or changing existing entries.

 Deployments support triggering off of image changes and on config changes. Config changes are any alterations to the
pod template, while image changes will result in the container image value being updated whenever an image stream tag is
updated. You may also trigger Kubernetes stateful sets, daemon sets, deployments, and cron jobs from images. Disabling
the config change trigger is equivalent to pausing most objects. Deployment configs will not perform their first
deployment until all image change triggers have been submitted.

 Build configs support triggering off of image changes, config changes, and webhooks. The config change trigger for a
build config will only trigger the first build.

Usage:
  oc set triggers RESOURCE/NAME [--from-config|--from-image|--from-github|--from-webhook] [--auto|--manual] [flags]

Examples:
  # Print the triggers on the deployment config 'myapp'
  oc set triggers dc/myapp
  
  # Set all triggers to manual
  oc set triggers dc/myapp --manual
  
  # Enable all automatic triggers
  oc set triggers dc/myapp --auto
  
  # Reset the GitHub webhook on a build to a new, generated secret
  oc set triggers bc/webapp --from-github
  oc set triggers bc/webapp --from-webhook
  
  # Remove all triggers
  oc set triggers bc/webapp --remove-all
  
  # Stop triggering on config change
  oc set triggers dc/myapp --from-config --remove
  
  # Add an image trigger to a build config
  oc set triggers bc/webapp --from-image=namespace1/image:latest
  
  # Add an image trigger to a stateful set on the main container
  oc set triggers statefulset/db --from-image=namespace1/image:latest -c main

Options:
      --all=false: If true, select all resources in the namespace of the specified resource types
      --allow-missing-template-keys=true: If true, ignore any errors in templates when a field or map key is missing in
the template. Only applies to golang and jsonpath output formats.
      --auto=false: If true, enable all triggers, or just the specified trigger
  -c, --containers='': Comma delimited list of container names this trigger applies to on deployments; defaults to the
name of the only container
      --dry-run='none': Must be "none", "server", or "client". If client strategy, only print the object that would be
sent, without sending it. If server strategy, submit server-side request without persisting the resource.
  -f, --filename=[]: Filename, directory, or URL to files to use to edit the resource
      --from-bitbucket=false: If true, a Bitbucket webhook - a secret value will be generated automatically
      --from-config=false: If set, configuration changes will result in a change
      --from-github=false: If true, a GitHub webhook - a secret value will be generated automatically
      --from-gitlab=false: If true, a GitLab webhook - a secret value will be generated automatically
      --from-image='': An image stream tag to trigger off of
      --from-webhook=false: If true, a generic webhook - a secret value will be generated automatically
      --from-webhook-allow-env=false: If true, a generic webhook which can provide environment variables - a secret
value will be generated automatically
  -k, --kustomize='': Process the kustomization directory. This flag can't be used together with -f or -R.
      --local=false: If true, set image will NOT contact api-server but run locally.
      --manual=false: If true, set all triggers to manual, or just the specified trigger
  -o, --output='': Output format. One of:
json|yaml|name|go-template|go-template-file|template|templatefile|jsonpath|jsonpath-as-json|jsonpath-file.
  -R, --recursive=false: Process the directory used in -f, --filename recursively. Useful when you want to manage
related manifests organized within the same directory.
      --remove=false: If true, remove the specified trigger(s).
      --remove-all=false: If true, remove all triggers.
  -l, --selector='': Selector (label query) to filter on
      --template='': Template string or path to template file to use when -o=go-template, -o=go-template-file. The
template format is golang templates [http://golang.org/pkg/text/template/#pkg-overview].

Use "oc options" for a list of global command-line options (applies to all commands).
[student@workstation ~]$ 
[student@workstation ~]$ oc describe bc | grep -i trigger
Namespace:	vkndeo-project-php-trigger
From Image:	ImageStreamTag vkndeo-project-php-trigger/php-73-ubi8:latest
Triggered by:		Config, ImageChange
	URL:	https://api.ap46a.prod.ole.redhat.com:6443/apis/build.openshift.io/v1/namespaces/vkndeo-project-php-trigger/buildconfigs/phptriiger/webhooks/<secret>/github
	URL:		https://api.ap46a.prod.ole.redhat.com:6443/apis/build.openshift.io/v1/namespaces/vkndeo-project-php-trigger/buildconfigs/phptriiger/webhooks/<secret>/generic
  Warning	BuildConfigTriggerFailed	8m9s	buildconfig-controller	error triggering Build for BuildConfig vkndeo-project-php-trigger/phptriiger: Internal error occurred: build config vkndeo-project-php-trigger/phptriiger has already instantiated a build for imageid image-registry.openshift-image-registry.svc:5000/vkndeo-project-php-trigger/php-73-ubi8@sha256:48815fc499b3b573e79a0e726d9bee4c8d1e1ad9acc063cbe7896f28f33ad12f
[student@workstation ~]$ 
[student@workstation ~]$ 
[student@workstation ~]$ 
[student@workstation ~]$ oc describe bc 
Name:		phptriiger
Namespace:	vkndeo-project-php-trigger
Created:	9 minutes ago
Labels:		app=phptriiger
		app.kubernetes.io/component=phptriiger
		app.kubernetes.io/instance=phptriiger
Annotations:	openshift.io/generated-by=OpenShiftNewApp
Latest Version:	2

Strategy:	Source
URL:		https://github.com/sanjurajrh/php-helloworld
From Image:	ImageStreamTag vkndeo-project-php-trigger/php-73-ubi8:latest
Output to:	ImageStreamTag phptriiger:latest

Build Run Policy:	Serial
Triggered by:		Config, ImageChange
Webhook GitHub:
	URL:	https://api.ap46a.prod.ole.redhat.com:6443/apis/build.openshift.io/v1/namespaces/vkndeo-project-php-trigger/buildconfigs/phptriiger/webhooks/<secret>/github
Webhook Generic:
	URL:		https://api.ap46a.prod.ole.redhat.com:6443/apis/build.openshift.io/v1/namespaces/vkndeo-project-php-trigger/buildconfigs/phptriiger/webhooks/<secret>/generic
	AllowEnv:	false
Builds History Limit:
	Successful:	5
	Failed:		5

Build		Status		Duration	Creation Time
phptriiger-2 	complete 	52s 		2022-04-13 03:05:08 -0400 EDT
phptriiger-1 	complete 	59s 		2022-04-13 03:01:15 -0400 EDT

Events:
  Type		Reason				Age	From			Message
  ----		------				----	----			-------
  Warning	BuildConfigTriggerFailed	9m7s	buildconfig-controller	error triggering Build for BuildConfig vkndeo-project-php-trigger/phptriiger: Internal error occurred: build config vkndeo-project-php-trigger/phptriiger has already instantiated a build for imageid image-registry.openshift-image-registry.svc:5000/vkndeo-project-php-trigger/php-73-ubi8@sha256:48815fc499b3b573e79a0e726d9bee4c8d1e1ad9acc063cbe7896f28f33ad12f
[student@workstation ~]$ Build Run Policy:Serial
bash: Build: command not found...
[student@workstation ~]$ Triggered by:Config, ImageChange
bash: Triggered: command not found...
[student@workstation ~]$ 
[student@workstation ~]$ oc edit bc 
Edit cancelled, no changes made.
[student@workstation ~]$ oc get bc
NAME         TYPE     FROM   LATEST
phptriiger   Source   Git    2
[student@workstation ~]$ oc get bc/phptriiger -o yaml | grep -i post
  postCommit: {}
[student@workstation ~]$ 
[student@workstation ~]$ 
[student@workstation ~]$ oc set build-hook -h 
Set or remove a build hook on a build config

 Build hooks allow behavior to be injected into the build process.

 A post-commit build hook is executed after a build has committed an image but before the image has been pushed to a
registry. It can be used to execute tests on the image and verify it before it is made available in a registry or for
any other logic that is needed to execute before the image is pushed to the registry. A new container with the recently
built image is launched with the build hook command. If the command or script run by the build hook returns a non-zero
exit code, the resulting image will not be pushed to the registry.

 The command for a build hook may be specified as a shell script (with the --script argument), as a new entrypoint
command on the image with the --command argument, or as a set of arguments to the image's entrypoint (default).

Usage:
  oc set build-hook BUILDCONFIG --post-commit [--command] [--script] -- CMD [flags]

Examples:
  # Clear post-commit hook on a build config
  oc set build-hook bc/mybuild --post-commit --remove
  
  # Set the post-commit hook to execute a test suite using a new entrypoint
  oc set build-hook bc/mybuild --post-commit --command -- /bin/bash -c /var/lib/test-image.sh
  
  # Set the post-commit hook to execute a shell script
  oc set build-hook bc/mybuild --post-commit --script="/var/lib/test-image.sh param1 param2 && /var/lib/done.sh"

Options:
      --all=false: If true, select all build configs in the namespace
      --allow-missing-template-keys=true: If true, ignore any errors in templates when a field or map key is missing in
the template. Only applies to golang and jsonpath output formats.
      --command=false: If true, set the entrypoint of the hook container to the given command
      --dry-run='none': Must be "none", "server", or "client". If client strategy, only print the object that would be
sent, without sending it. If server strategy, submit server-side request without persisting the resource.
  -f, --filename=[]: Filename, directory, or URL to files to use to edit the resource
  -k, --kustomize='': Process the kustomization directory. This flag can't be used together with -f or -R.
      --local=false: If true, set image will NOT contact api-server but run locally.
  -o, --output='': Output format. One of:
json|yaml|name|go-template|go-template-file|template|templatefile|jsonpath|jsonpath-as-json|jsonpath-file.
      --post-commit=false: If true, set the post-commit build hook on a build config
  -R, --recursive=false: Process the directory used in -f, --filename recursively. Useful when you want to manage
related manifests organized within the same directory.
      --remove=false: If true, remove the build hook.
      --script='': Specify a script to run for the build-hook
  -l, --selector='': Selector (label query) to filter build configs
      --template='': Template string or path to template file to use when -o=go-template, -o=go-template-file. The
template format is golang templates [http://golang.org/pkg/text/template/#pkg-overview].

Use "oc options" for a list of global command-line options (applies to all commands).
[student@workstation ~]$ oc set build-hook -h 
[student@workstation ~]$ oc get bc/phptriiger -o yaml | grep -i post
  postCommit: {}
[student@workstation ~]$ 
[student@workstation ~]$ 
[student@workstation ~]$ oc set build-hook bc/phptriiger --post-commit --command -- bash -c "curl http://www.gooogle.com"
buildconfig.build.openshift.io/phptriiger hooks updated
[student@workstation ~]$ 
[student@workstation ~]$ oc get bc/phptriiger -o yaml | grep -i post
        f:postCommit:
  postCommit:
[student@workstation ~]$ oc get bc/phptriiger -o yaml | grep -i post -C2
            f:kind: {}
            f:name: {}
        f:postCommit:
          f:args: {}
          f:command: {}
--
      kind: ImageStreamTag
      name: phptriiger:latest
  postCommit:
    args:
    - -c
[student@workstation ~]$ oc get bc/phptriiger -o yaml | grep -i post -C10
          .: {}
          f:app: {}
          f:app.kubernetes.io/component: {}
          f:app.kubernetes.io/instance: {}
      f:spec:
        f:output:
          f:to:
            .: {}
            f:kind: {}
            f:name: {}
        f:postCommit:
          f:args: {}
          f:command: {}
        f:runPolicy: {}
        f:source:
          f:git:
            .: {}
            f:uri: {}
          f:type: {}
        f:strategy:
          f:sourceStrategy:
--
  resourceVersion: "23032268"
  selfLink: /apis/build.openshift.io/v1/namespaces/vkndeo-project-php-trigger/buildconfigs/phptriiger
  uid: 51497d5e-c4b1-4008-8d4f-3b6fbf83d910
spec:
  failedBuildsHistoryLimit: 5
  nodeSelector: null
  output:
    to:
      kind: ImageStreamTag
      name: phptriiger:latest
  postCommit:
    args:
    - -c
    - curl http://www.gooogle.com
    command:
    - bash
  resources: {}
  runPolicy: Serial
  source:
    git:
      uri: https://github.com/sanjurajrh/php-helloworld
[student@workstation ~]$ oc start-build bc/phptriiger -F 
build.build.openshift.io/phptriiger-3 started
Cloning "https://github.com/sanjurajrh/php-helloworld" ...
	Commit:	81ab721c319d8688a6f6af8a4770650463e249c9 (Update index.php with correct syntax)
	Author:	sanjurajrh <84304865+sanjurajrh@users.noreply.github.com>
	Date:	Wed Apr 13 11:23:33 2022 +0530
Caching blobs under "/var/cache/blobs".
Getting image source signatures
Copying blob sha256:2268ee6d0e5a676861f184cfc302101e88b8833408861c7f4babae0ceb021404
Copying blob sha256:cc326b0b9d4df8702d8fe01d6a8ad44adb9cd63c7cecfa71b187a88b67c4c956
Copying blob sha256:3be8687e54a9ae50f279c6a04da75395be372a17928b81b5beef4291503c5340
Copying blob sha256:44368d8124cb615c7a79f724e4145771122a073f0f22d1db8d949e6134a6c2af
Copying blob sha256:691a8d1ddde6350bb0d9babe67864eaaaa41a46db9e11ac10376ad31a76bdb90
Copying config sha256:cede483a1e72bd9491b9d5dde028f9356ef26e1f1271e20d970a62ec7781443f
Writing manifest to image destination
Storing signatures
Generating dockerfile with builder image image-registry.openshift-image-registry.svc:5000/vkndeo-project-php-trigger/php-73-ubi8@sha256:4009aebbda45063ec8c14d4070b762b658b7eb7fcfaa98f7ed3081931b9a3279
Replaced Dockerfile FROM image image-registry.openshift-image-registry.svc:5000/vkndeo-project-php-trigger/php-73-ubi8@sha256:4009aebbda45063ec8c14d4070b762b658b7eb7fcfaa98f7ed3081931b9a3279
STEP 1: FROM image-registry.openshift-image-registry.svc:5000/vkndeo-project-php-trigger/php-73-ubi8@sha256:4009aebbda45063ec8c14d4070b762b658b7eb7fcfaa98f7ed3081931b9a3279 AS appimage57ed57390e8d490998baf0d3d0a32e77
STEP 2: LABEL "io.openshift.build.image"="image-registry.openshift-image-registry.svc:5000/vkndeo-project-php-trigger/php-73-ubi8@sha256:4009aebbda45063ec8c14d4070b762b658b7eb7fcfaa98f7ed3081931b9a3279"       "io.openshift.build.commit.author"="sanjurajrh <84304865+sanjurajrh@users.noreply.github.com>"       "io.openshift.build.commit.date"="Wed Apr 13 11:23:33 2022 +0530"       "io.openshift.build.commit.id"="81ab721c319d8688a6f6af8a4770650463e249c9"       "io.openshift.build.commit.ref"="main"       "io.openshift.build.commit.message"="Update index.php with correct syntax"       "io.openshift.build.source-location"="https://github.com/sanjurajrh/php-helloworld"
STEP 3: ENV OPENSHIFT_BUILD_NAME="phptriiger-3"     OPENSHIFT_BUILD_NAMESPACE="vkndeo-project-php-trigger"     OPENSHIFT_BUILD_SOURCE="https://github.com/sanjurajrh/php-helloworld"     OPENSHIFT_BUILD_COMMIT="81ab721c319d8688a6f6af8a4770650463e249c9"
STEP 4: USER root
STEP 5: COPY upload/src /tmp/src
STEP 6: RUN chown -R 1001:0 /tmp/src
time="2022-04-13T07:21:30Z" level=warning msg="Path \"/run/secrets/etc-pki-entitlement\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
time="2022-04-13T07:21:30Z" level=warning msg="Path \"/run/secrets/redhat.repo\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
STEP 7: USER 1001
STEP 8: RUN /usr/libexec/s2i/assemble
time="2022-04-13T07:21:31Z" level=warning msg="Path \"/run/secrets/etc-pki-entitlement\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
time="2022-04-13T07:21:31Z" level=warning msg="Path \"/run/secrets/redhat.repo\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
---> Installing application source...
=> sourcing 20-copy-config.sh ...
---> 07:21:31     Processing additional arbitrary httpd configuration provided by s2i ...
=> sourcing 00-documentroot.conf ...
=> sourcing 50-mpm-tuning.conf ...
=> sourcing 40-ssl-certs.sh ...
STEP 9: CMD /usr/libexec/s2i/run
Getting image source signatures
Copying blob sha256:d7b836ae9a009d39bdf3337bc4b97c92a10d1c04b294c565ee248b3b32aabb7b
Copying blob sha256:5b2f0b9e81c71a0ae74faf3aaa6461020f37ef58a16d00a6a8cef413e204a923
Copying blob sha256:f5ad8ccc9fb5ce9d9952966612c056788f1643418b84d7338b022f7c8ac483c4
Copying blob sha256:8f2a2f50ca988ead484fd078b3b823b4a45f30731dcc452d0d923ccd21d35afb
Copying blob sha256:ee93e4b3221dc8816f51068260e8555d6ceb2d4371e9ae8efb62ddc29a385303
Copying blob sha256:98360b4223195caf9fd942c42470f5e33ffa1159f75f47476f6c735f149c3871
Copying config sha256:459c8c426fb16cdabad8a7bfe877b5800d5bd030a6d6c3a25309cbfcf5978186
Writing manifest to image destination
Storing signatures
--> 459c8c426fb
STEP 10: FROM 459c8c426fb16cdabad8a7bfe877b5800d5bd030a6d6c3a25309cbfcf5978186
STEP 11: RUN bash -c curl http://www.gooogle.com
time="2022-04-13T07:21:33Z" level=warning msg="Path \"/run/secrets/etc-pki-entitlement\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
time="2022-04-13T07:21:33Z" level=warning msg="Path \"/run/secrets/redhat.repo\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
curl: try 'curl --help' or 'curl --manual' for more information
error: build error: error building at STEP "RUN bash -c curl http://www.gooogle.com": error while running runtime: exit status 2
[student@workstation ~]$ oc get pods 
NAME                          READY   STATUS      RESTARTS   AGE
phptriiger-1-build            0/1     Completed   0          20m
phptriiger-2-build            0/1     Completed   0          17m
phptriiger-3-build            0/1     Error       0          107s
phptriiger-7dd88454bf-w8grh   1/1     Running     0          16m
[student@workstation ~]$ oc edit bc
buildconfig.build.openshift.io/phptriiger edited
[student@workstation ~]$ oc start-build bc/phptriiger -F 
build.build.openshift.io/phptriiger-4 started
Cloning "https://github.com/sanjurajrh/php-helloworld" ...
	Commit:	81ab721c319d8688a6f6af8a4770650463e249c9 (Update index.php with correct syntax)
	Author:	sanjurajrh <84304865+sanjurajrh@users.noreply.github.com>
	Date:	Wed Apr 13 11:23:33 2022 +0530
Caching blobs under "/var/cache/blobs".
Getting image source signatures
Copying blob sha256:2268ee6d0e5a676861f184cfc302101e88b8833408861c7f4babae0ceb021404
Copying blob sha256:691a8d1ddde6350bb0d9babe67864eaaaa41a46db9e11ac10376ad31a76bdb90
Copying blob sha256:44368d8124cb615c7a79f724e4145771122a073f0f22d1db8d949e6134a6c2af
Copying blob sha256:cc326b0b9d4df8702d8fe01d6a8ad44adb9cd63c7cecfa71b187a88b67c4c956
Copying blob sha256:3be8687e54a9ae50f279c6a04da75395be372a17928b81b5beef4291503c5340
Copying config sha256:cede483a1e72bd9491b9d5dde028f9356ef26e1f1271e20d970a62ec7781443f
Writing manifest to image destination
Storing signatures
Generating dockerfile with builder image image-registry.openshift-image-registry.svc:5000/vkndeo-project-php-trigger/php-73-ubi8@sha256:4009aebbda45063ec8c14d4070b762b658b7eb7fcfaa98f7ed3081931b9a3279
Replaced Dockerfile FROM image image-registry.openshift-image-registry.svc:5000/vkndeo-project-php-trigger/php-73-ubi8@sha256:4009aebbda45063ec8c14d4070b762b658b7eb7fcfaa98f7ed3081931b9a3279
STEP 1: FROM image-registry.openshift-image-registry.svc:5000/vkndeo-project-php-trigger/php-73-ubi8@sha256:4009aebbda45063ec8c14d4070b762b658b7eb7fcfaa98f7ed3081931b9a3279 AS appimage458c9ebdfc6a4d8c827e8999ea84aef4
STEP 2: LABEL "io.openshift.build.image"="image-registry.openshift-image-registry.svc:5000/vkndeo-project-php-trigger/php-73-ubi8@sha256:4009aebbda45063ec8c14d4070b762b658b7eb7fcfaa98f7ed3081931b9a3279"       "io.openshift.build.commit.author"="sanjurajrh <84304865+sanjurajrh@users.noreply.github.com>"       "io.openshift.build.commit.date"="Wed Apr 13 11:23:33 2022 +0530"       "io.openshift.build.commit.id"="81ab721c319d8688a6f6af8a4770650463e249c9"       "io.openshift.build.commit.ref"="main"       "io.openshift.build.commit.message"="Update index.php with correct syntax"       "io.openshift.build.source-location"="https://github.com/sanjurajrh/php-helloworld"
STEP 3: ENV OPENSHIFT_BUILD_NAME="phptriiger-4"     OPENSHIFT_BUILD_NAMESPACE="vkndeo-project-php-trigger"     OPENSHIFT_BUILD_SOURCE="https://github.com/sanjurajrh/php-helloworld"     OPENSHIFT_BUILD_COMMIT="81ab721c319d8688a6f6af8a4770650463e249c9"
STEP 4: USER root
STEP 5: COPY upload/src /tmp/src
STEP 6: RUN chown -R 1001:0 /tmp/src
time="2022-04-13T07:24:15Z" level=warning msg="Path \"/run/secrets/etc-pki-entitlement\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
time="2022-04-13T07:24:15Z" level=warning msg="Path \"/run/secrets/redhat.repo\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
STEP 7: USER 1001
STEP 8: RUN /usr/libexec/s2i/assemble
time="2022-04-13T07:24:16Z" level=warning msg="Path \"/run/secrets/etc-pki-entitlement\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
time="2022-04-13T07:24:16Z" level=warning msg="Path \"/run/secrets/redhat.repo\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
---> Installing application source...
=> sourcing 20-copy-config.sh ...
---> 07:24:16     Processing additional arbitrary httpd configuration provided by s2i ...
=> sourcing 00-documentroot.conf ...
=> sourcing 50-mpm-tuning.conf ...
=> sourcing 40-ssl-certs.sh ...
STEP 9: CMD /usr/libexec/s2i/run
Getting image source signatures
Copying blob sha256:d7b836ae9a009d39bdf3337bc4b97c92a10d1c04b294c565ee248b3b32aabb7b
Copying blob sha256:5b2f0b9e81c71a0ae74faf3aaa6461020f37ef58a16d00a6a8cef413e204a923
Copying blob sha256:f5ad8ccc9fb5ce9d9952966612c056788f1643418b84d7338b022f7c8ac483c4
Copying blob sha256:8f2a2f50ca988ead484fd078b3b823b4a45f30731dcc452d0d923ccd21d35afb
Copying blob sha256:ee93e4b3221dc8816f51068260e8555d6ceb2d4371e9ae8efb62ddc29a385303
Copying blob sha256:a764e1c43bec4fb822b4420bec3383b5fe762fa1e394acdb05b2d89a90e43dc0
Copying config sha256:3b8e1b72f88f4466e7a995060c02111f30ba05cfc90946e2623c3a79574dc7b0
Writing manifest to image destination
Storing signatures
--> 3b8e1b72f88
STEP 10: FROM 3b8e1b72f88f4466e7a995060c02111f30ba05cfc90946e2623c3a79574dc7b0
STEP 11: RUN bash -c curl http://www.google.com
time="2022-04-13T07:24:17Z" level=warning msg="Path \"/run/secrets/etc-pki-entitlement\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
time="2022-04-13T07:24:17Z" level=warning msg="Path \"/run/secrets/redhat.repo\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
curl: try 'curl --help' or 'curl --manual' for more information
error: build error: error building at STEP "RUN bash -c curl http://www.google.com": error while running runtime: exit status 2
[student@workstation ~]$ oc edit bc
buildconfig.build.openshift.io/phptriiger edited
[student@workstation ~]$ oc start-build bc/phptriiger -F 
build.build.openshift.io/phptriiger-5 started
Cloning "https://github.com/sanjurajrh/php-helloworld" ...
	Commit:	81ab721c319d8688a6f6af8a4770650463e249c9 (Update index.php with correct syntax)
	Author:	sanjurajrh <84304865+sanjurajrh@users.noreply.github.com>
	Date:	Wed Apr 13 11:23:33 2022 +0530
Caching blobs under "/var/cache/blobs".
Getting image source signatures
Copying blob sha256:2268ee6d0e5a676861f184cfc302101e88b8833408861c7f4babae0ceb021404
Copying blob sha256:3be8687e54a9ae50f279c6a04da75395be372a17928b81b5beef4291503c5340
Copying blob sha256:44368d8124cb615c7a79f724e4145771122a073f0f22d1db8d949e6134a6c2af
Copying blob sha256:691a8d1ddde6350bb0d9babe67864eaaaa41a46db9e11ac10376ad31a76bdb90
Copying blob sha256:cc326b0b9d4df8702d8fe01d6a8ad44adb9cd63c7cecfa71b187a88b67c4c956
Copying config sha256:cede483a1e72bd9491b9d5dde028f9356ef26e1f1271e20d970a62ec7781443f
Writing manifest to image destination
Storing signatures
Generating dockerfile with builder image image-registry.openshift-image-registry.svc:5000/vkndeo-project-php-trigger/php-73-ubi8@sha256:4009aebbda45063ec8c14d4070b762b658b7eb7fcfaa98f7ed3081931b9a3279
Replaced Dockerfile FROM image image-registry.openshift-image-registry.svc:5000/vkndeo-project-php-trigger/php-73-ubi8@sha256:4009aebbda45063ec8c14d4070b762b658b7eb7fcfaa98f7ed3081931b9a3279
STEP 1: FROM image-registry.openshift-image-registry.svc:5000/vkndeo-project-php-trigger/php-73-ubi8@sha256:4009aebbda45063ec8c14d4070b762b658b7eb7fcfaa98f7ed3081931b9a3279 AS appimagecf43f8778d9d4a8bb0c1403c0b758914
STEP 2: LABEL "io.openshift.build.commit.date"="Wed Apr 13 11:23:33 2022 +0530"       "io.openshift.build.commit.id"="81ab721c319d8688a6f6af8a4770650463e249c9"       "io.openshift.build.commit.ref"="main"       "io.openshift.build.commit.message"="Update index.php with correct syntax"       "io.openshift.build.source-location"="https://github.com/sanjurajrh/php-helloworld"       "io.openshift.build.image"="image-registry.openshift-image-registry.svc:5000/vkndeo-project-php-trigger/php-73-ubi8@sha256:4009aebbda45063ec8c14d4070b762b658b7eb7fcfaa98f7ed3081931b9a3279"       "io.openshift.build.commit.author"="sanjurajrh <84304865+sanjurajrh@users.noreply.github.com>"
STEP 3: ENV OPENSHIFT_BUILD_NAME="phptriiger-5"     OPENSHIFT_BUILD_NAMESPACE="vkndeo-project-php-trigger"     OPENSHIFT_BUILD_SOURCE="https://github.com/sanjurajrh/php-helloworld"     OPENSHIFT_BUILD_COMMIT="81ab721c319d8688a6f6af8a4770650463e249c9"
STEP 4: USER root
STEP 5: COPY upload/src /tmp/src
STEP 6: RUN chown -R 1001:0 /tmp/src
time="2022-04-13T07:25:56Z" level=warning msg="Path \"/run/secrets/etc-pki-entitlement\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
time="2022-04-13T07:25:56Z" level=warning msg="Path \"/run/secrets/redhat.repo\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
STEP 7: USER 1001
STEP 8: RUN /usr/libexec/s2i/assemble
time="2022-04-13T07:25:57Z" level=warning msg="Path \"/run/secrets/etc-pki-entitlement\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
time="2022-04-13T07:25:57Z" level=warning msg="Path \"/run/secrets/redhat.repo\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
---> Installing application source...
=> sourcing 20-copy-config.sh ...
---> 07:25:57     Processing additional arbitrary httpd configuration provided by s2i ...
=> sourcing 00-documentroot.conf ...
=> sourcing 50-mpm-tuning.conf ...
=> sourcing 40-ssl-certs.sh ...
STEP 9: CMD /usr/libexec/s2i/run
Getting image source signatures
Copying blob sha256:d7b836ae9a009d39bdf3337bc4b97c92a10d1c04b294c565ee248b3b32aabb7b
Copying blob sha256:5b2f0b9e81c71a0ae74faf3aaa6461020f37ef58a16d00a6a8cef413e204a923
Copying blob sha256:f5ad8ccc9fb5ce9d9952966612c056788f1643418b84d7338b022f7c8ac483c4
Copying blob sha256:8f2a2f50ca988ead484fd078b3b823b4a45f30731dcc452d0d923ccd21d35afb
Copying blob sha256:ee93e4b3221dc8816f51068260e8555d6ceb2d4371e9ae8efb62ddc29a385303
Copying blob sha256:1339de01bac90f1db7f3fb831a9e89afe3ace7c10b0c47ea19f6efa17fddd0cb
Copying config sha256:1fc3db8898c07a26223635f063d6e5d7801fc44dae83c3697cd6848bb44c188d
Writing manifest to image destination
Storing signatures
--> 1fc3db8898c
STEP 10: FROM 1fc3db8898c07a26223635f063d6e5d7801fc44dae83c3697cd6848bb44c188d
STEP 11: RUN bash -c echo "Hello World"
time="2022-04-13T07:25:59Z" level=warning msg="Path \"/run/secrets/etc-pki-entitlement\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
time="2022-04-13T07:25:59Z" level=warning msg="Path \"/run/secrets/redhat.repo\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"

STEP 12: FROM 1fc3db8898c07a26223635f063d6e5d7801fc44dae83c3697cd6848bb44c188d
STEP 13: COMMIT temp.builder.openshift.io/vkndeo-project-php-trigger/phptriiger-5:b1a45775
--> 1fc3db8898c
1fc3db8898c07a26223635f063d6e5d7801fc44dae83c3697cd6848bb44c188d

Pushing image image-registry.openshift-image-registry.svc:5000/vkndeo-project-php-trigger/phptriiger:latest ...
Getting image source signatures
Copying blob sha256:1339de01bac90f1db7f3fb831a9e89afe3ace7c10b0c47ea19f6efa17fddd0cb
Copying blob sha256:cc326b0b9d4df8702d8fe01d6a8ad44adb9cd63c7cecfa71b187a88b67c4c956
Copying blob sha256:2268ee6d0e5a676861f184cfc302101e88b8833408861c7f4babae0ceb021404
Copying blob sha256:3be8687e54a9ae50f279c6a04da75395be372a17928b81b5beef4291503c5340
Copying blob sha256:691a8d1ddde6350bb0d9babe67864eaaaa41a46db9e11ac10376ad31a76bdb90
Copying blob sha256:44368d8124cb615c7a79f724e4145771122a073f0f22d1db8d949e6134a6c2af
Copying config sha256:1fc3db8898c07a26223635f063d6e5d7801fc44dae83c3697cd6848bb44c188d
Writing manifest to image destination
Storing signatures
Successfully pushed image-registry.openshift-image-registry.svc:5000/vkndeo-project-php-trigger/phptriiger@sha256:3f80bdbbf92f357ddc4862d17dedcf2536c5e85e6c20831cabbb05edbaadfe3e
Push successful
[student@workstation ~]$ oc edit bc
buildconfig.build.openshift.io/phptriiger edited
[student@workstation ~]$ oc start-build bc/phptriiger -F 
build.build.openshift.io/phptriiger-6 started
Cloning "https://github.com/sanjurajrh/php-helloworld" ...
	Commit:	81ab721c319d8688a6f6af8a4770650463e249c9 (Update index.php with correct syntax)
	Author:	sanjurajrh <84304865+sanjurajrh@users.noreply.github.com>
	Date:	Wed Apr 13 11:23:33 2022 +0530
Caching blobs under "/var/cache/blobs".
Getting image source signatures
Copying blob sha256:2268ee6d0e5a676861f184cfc302101e88b8833408861c7f4babae0ceb021404
Copying blob sha256:44368d8124cb615c7a79f724e4145771122a073f0f22d1db8d949e6134a6c2af
Copying blob sha256:691a8d1ddde6350bb0d9babe67864eaaaa41a46db9e11ac10376ad31a76bdb90
Copying blob sha256:cc326b0b9d4df8702d8fe01d6a8ad44adb9cd63c7cecfa71b187a88b67c4c956
Copying blob sha256:3be8687e54a9ae50f279c6a04da75395be372a17928b81b5beef4291503c5340
Copying config sha256:cede483a1e72bd9491b9d5dde028f9356ef26e1f1271e20d970a62ec7781443f
Writing manifest to image destination
Storing signatures
Generating dockerfile with builder image image-registry.openshift-image-registry.svc:5000/vkndeo-project-php-trigger/php-73-ubi8@sha256:4009aebbda45063ec8c14d4070b762b658b7eb7fcfaa98f7ed3081931b9a3279
Replaced Dockerfile FROM image image-registry.openshift-image-registry.svc:5000/vkndeo-project-php-trigger/php-73-ubi8@sha256:4009aebbda45063ec8c14d4070b762b658b7eb7fcfaa98f7ed3081931b9a3279
STEP 1: FROM image-registry.openshift-image-registry.svc:5000/vkndeo-project-php-trigger/php-73-ubi8@sha256:4009aebbda45063ec8c14d4070b762b658b7eb7fcfaa98f7ed3081931b9a3279 AS appimage1312e2b9f5cb48cdb6673d8f1c0b4f98
STEP 2: LABEL "io.openshift.build.image"="image-registry.openshift-image-registry.svc:5000/vkndeo-project-php-trigger/php-73-ubi8@sha256:4009aebbda45063ec8c14d4070b762b658b7eb7fcfaa98f7ed3081931b9a3279"       "io.openshift.build.commit.author"="sanjurajrh <84304865+sanjurajrh@users.noreply.github.com>"       "io.openshift.build.commit.date"="Wed Apr 13 11:23:33 2022 +0530"       "io.openshift.build.commit.id"="81ab721c319d8688a6f6af8a4770650463e249c9"       "io.openshift.build.commit.ref"="main"       "io.openshift.build.commit.message"="Update index.php with correct syntax"       "io.openshift.build.source-location"="https://github.com/sanjurajrh/php-helloworld"
STEP 3: ENV OPENSHIFT_BUILD_NAME="phptriiger-6"     OPENSHIFT_BUILD_NAMESPACE="vkndeo-project-php-trigger"     OPENSHIFT_BUILD_SOURCE="https://github.com/sanjurajrh/php-helloworld"     OPENSHIFT_BUILD_COMMIT="81ab721c319d8688a6f6af8a4770650463e249c9"
STEP 4: USER root
STEP 5: COPY upload/src /tmp/src
STEP 6: RUN chown -R 1001:0 /tmp/src
time="2022-04-13T07:27:21Z" level=warning msg="Path \"/run/secrets/etc-pki-entitlement\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
time="2022-04-13T07:27:21Z" level=warning msg="Path \"/run/secrets/redhat.repo\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
STEP 7: USER 1001
STEP 8: RUN /usr/libexec/s2i/assemble
time="2022-04-13T07:27:22Z" level=warning msg="Path \"/run/secrets/etc-pki-entitlement\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
time="2022-04-13T07:27:22Z" level=warning msg="Path \"/run/secrets/redhat.repo\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
---> Installing application source...
=> sourcing 20-copy-config.sh ...
---> 07:27:22     Processing additional arbitrary httpd configuration provided by s2i ...
=> sourcing 00-documentroot.conf ...
=> sourcing 50-mpm-tuning.conf ...
=> sourcing 40-ssl-certs.sh ...
STEP 9: CMD /usr/libexec/s2i/run
Getting image source signatures
Copying blob sha256:d7b836ae9a009d39bdf3337bc4b97c92a10d1c04b294c565ee248b3b32aabb7b
Copying blob sha256:5b2f0b9e81c71a0ae74faf3aaa6461020f37ef58a16d00a6a8cef413e204a923
Copying blob sha256:f5ad8ccc9fb5ce9d9952966612c056788f1643418b84d7338b022f7c8ac483c4
Copying blob sha256:8f2a2f50ca988ead484fd078b3b823b4a45f30731dcc452d0d923ccd21d35afb
Copying blob sha256:ee93e4b3221dc8816f51068260e8555d6ceb2d4371e9ae8efb62ddc29a385303
Copying blob sha256:1c161d5f9e2b5bc5e4f81b5ca8fdd3186a4f5dac67a7a84c093c982f8ac64b53
Copying config sha256:0bb5fd2613df350dae4bb66dc80047d4647ba029f99060c8135b943e8929e7c4
Writing manifest to image destination
Storing signatures
--> 0bb5fd2613d
STEP 10: FROM 0bb5fd2613df350dae4bb66dc80047d4647ba029f99060c8135b943e8929e7c4
STEP 11: RUN bash -c eccho "Hello World"
time="2022-04-13T07:27:23Z" level=warning msg="Path \"/run/secrets/etc-pki-entitlement\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
time="2022-04-13T07:27:23Z" level=warning msg="Path \"/run/secrets/redhat.repo\" from \"/etc/containers/mounts.conf\" doesn't exist, skipping"
Hello World: eccho: command not found
error: build error: error building at STEP "RUN bash -c eccho "Hello World"": error while running runtime: exit status 127
[student@workstation ~]$ oc get build s
Error from server (NotFound): builds.build.openshift.io "s" not found
[student@workstation ~]$ oc get build
NAME           TYPE     FROM          STATUS                        STARTED              DURATION
phptriiger-1   Source   Git@81ab721   Complete                      27 minutes ago       59s
phptriiger-2   Source   Git@81ab721   Complete                      23 minutes ago       52s
phptriiger-3   Source   Git@81ab721   Failed (GenericBuildFailed)   7 minutes ago        54s
phptriiger-4   Source   Git@81ab721   Failed (GenericBuildFailed)   4 minutes ago        58s
phptriiger-5   Source   Git@81ab721   Complete                      3 minutes ago        51s
phptriiger-6   Source   Git@81ab721   Failed (GenericBuildFailed)   About a minute ago   50s
[student@workstation ~]$ 

